{"version":3,"file":"input-file-from-webcam.entry.cjs.js","sources":["src/utils/camera.ts","src/components/input-file-from-webcam/input-file-from-webcam.css?tag=input-file-from-webcam&encapsulation=shadow","src/components/input-file-from-webcam/input-file-from-webcam.tsx"],"sourcesContent":["import { createVideo, createCanvas, CameraDirection, initWebcamToVideo, renderToCanvas, takePicture } from \"./camera.service\";\n\n\n\ninterface SuperCamera {\n    initCamera(parentElement: HTMLElement, direction: CameraDirection, drawImageCb: Function): Promise<HTMLCanvasElement>,\n    takePicture(): Promise<Blob>,\n    resetCamera(): void,\n}\n\n\n\nexport class WebCamera implements SuperCamera {\n\n    private elVideo: HTMLVideoElement;\n    private stream: MediaStream;\n    private canvas: HTMLCanvasElement;\n\n\n    public async initCamera( parentElement: HTMLElement, direction: CameraDirection, drawImageCb: Function = null) {\n\n        this.resetCamera();\n\n        if ( !this.elVideo ) {\n            this.elVideo = createVideo()\n        }\n\n        if ( !this.canvas ) {\n            this.canvas = createCanvas(parentElement)\n            parentElement.appendChild(this.canvas)\n        }\n\n        initWebcamToVideo(this.elVideo, direction)\n\n        renderToCanvas(this.canvas, this.elVideo, drawImageCb)\n\n        return this.canvas\n    }\n\n\n    public resetCamera() {\n        if (this.stream) this.stream?.getVideoTracks()?.forEach(track => {\n            track?.stop()\n            this.stream?.removeTrack(track)\n        });\n        if (this.elVideo) this.elVideo.srcObject = null;\n    }\n\n    public async takePicture(quality: number = 0.85): Promise<File> {\n        return await takePicture(this.canvas, quality);\n    }\n\n}\n\n\nexport const camera = new WebCamera()\n",":host {\n  display: inline-block;\n  position: relative;\n  width: 460px;\n  height: 460px;\n  border-radius: 12px;\n  overflow: hidden;\n  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.15);\n  border: 2px solid #e0e0e0;\n  background: #f5f5f5;\n  transition: all 0.3s ease;\n}\n\n:host(.camera-ready) {\n  border-color: #4CAF50;\n  box-shadow: 0 8px 32px rgba(76, 175, 80, 0.2);\n}\n\n:host(.camera-error) {\n  border-color: #f44336;\n  box-shadow: 0 8px 32px rgba(244, 67, 54, 0.2);\n}\n\n:host(.camera-loading) {\n  border-color: #2196F3;\n  box-shadow: 0 8px 32px rgba(33, 150, 243, 0.2);\n}\n\n:host(.flipped) canvas {\n  transform: scaleX(-1);\n}\n\nvideo {\n  display: none;\n}\n\ncanvas {\n  width: 100%;\n  height: 100%;\n  object-fit: cover;\n  transition: transform 0.3s ease;\n}\n\n/* Camera states */\n.camera-state {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  width: 100%;\n  height: 100%;\n  padding: 20px;\n  text-align: center;\n  box-sizing: border-box;\n}\n\n.camera-state.loading {\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n  color: white;\n}\n\n.camera-state.error {\n  background: linear-gradient(135deg, #ff6b6b 0%, #ee5a52 100%);\n  color: white;\n}\n\n.camera-state.inactive {\n  background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);\n  color: #333;\n}\n\n/* Loading spinner */\n.spinner {\n  width: 40px;\n  height: 40px;\n  border: 4px solid rgba(255, 255, 255, 0.3);\n  border-top: 4px solid white;\n  border-radius: 50%;\n  animation: spin 1s linear infinite;\n  margin-bottom: 16px;\n}\n\n@keyframes spin {\n  0% { transform: rotate(0deg); }\n  100% { transform: rotate(360deg); }\n}\n\n/* Icons */\n.error-icon,\n.inactive-icon {\n  font-size: 48px;\n  margin-bottom: 16px;\n}\n\n/* Messages */\n.camera-state p {\n  margin: 0 0 16px 0;\n  font-size: 16px;\n  font-weight: 500;\n  line-height: 1.4;\n}\n\n.error-message {\n  max-width: 300px;\n}\n\n/* Buttons */\n.retry-button,\n.start-button {\n  padding: 12px 24px;\n  border: none;\n  border-radius: 8px;\n  background: rgba(255, 255, 255, 0.2);\n  color: inherit;\n  font-size: 14px;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  backdrop-filter: blur(10px);\n}\n\n.retry-button:hover,\n.start-button:hover {\n  background: rgba(255, 255, 255, 0.3);\n  transform: translateY(-2px);\n}\n\n.start-button {\n  background: rgba(0, 0, 0, 0.1);\n}\n\n.start-button:hover {\n  background: rgba(0, 0, 0, 0.2);\n}\n\n/* Camera controls */\n.camera-controls {\n  position: absolute;\n  bottom: 16px;\n  left: 50%;\n  transform: translateX(-50%);\n  display: flex;\n  gap: 12px;\n  z-index: 10;\n}\n\n.control-button {\n  width: 56px;\n  height: 56px;\n  border: none;\n  border-radius: 50%;\n  background: rgba(0, 0, 0, 0.7);\n  color: white;\n  font-size: 24px;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: all 0.3s ease;\n  backdrop-filter: blur(10px);\n}\n\n.control-button:hover {\n  background: rgba(0, 0, 0, 0.9);\n  transform: scale(1.1);\n}\n\n.control-button:active {\n  transform: scale(0.95);\n}\n\n.capture-button {\n  width: 72px;\n  height: 72px;\n  background: rgba(255, 255, 255, 0.9);\n  color: #333;\n  font-size: 28px;\n}\n\n.capture-button:hover {\n  background: white;\n}\n\n.control-button:disabled {\n  opacity: 0.6;\n  cursor: not-allowed;\n  transform: none;\n}\n\n.control-button:disabled:hover {\n  transform: none;\n  background: rgba(0, 0, 0, 0.7);\n}\n\n/* Flash effect */\n.flash-effect {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background: white;\n  opacity: 0;\n  transition: opacity 0.2s ease;\n  pointer-events: none;\n  z-index: 5;\n}\n\n/* Responsive design */\n@media (max-width: 600px) {\n  :host {\n    width: 100%;\n    height: auto;\n    aspect-ratio: 1;\n    max-width: 400px;\n  }\n\n  .camera-controls {\n    bottom: 12px;\n  }\n\n  .control-button {\n    width: 48px;\n    height: 48px;\n    font-size: 20px;\n  }\n\n  .capture-button {\n    width: 64px;\n    height: 64px;\n    font-size: 24px;\n  }\n\n  .camera-state p {\n    font-size: 14px;\n  }\n\n  .error-icon,\n  .inactive-icon {\n    font-size: 36px;\n  }\n}\n\n/* High contrast mode support */\n@media (prefers-contrast: high) {\n  :host {\n    border-width: 3px;\n  }\n\n  .control-button {\n    border: 2px solid white;\n  }\n}\n\n/* Reduced motion support */\n@media (prefers-reduced-motion: reduce) {\n  * {\n    animation-duration: 0.01ms !important;\n    animation-iteration-count: 1 !important;\n    transition-duration: 0.01ms !important;\n  }\n}","import { Component, Host, h, Method, Listen, Prop, Event, EventEmitter, Element, State, Watch } from '@stencil/core';\nimport { camera } from '../../utils/camera';\nimport { CameraDirection } from '../../utils/camera.service';\n\nexport interface WebcamError {\n  type: 'permission' | 'device' | 'stream' | 'unknown';\n  message: string;\n}\n\nexport interface CameraState {\n  status: 'loading' | 'ready' | 'error' | 'capturing' | 'inactive';\n  error?: WebcamError;\n}\n\n@Component({\n  tag: 'input-file-from-webcam',\n  styleUrl: 'input-file-from-webcam.css',\n  shadow: true,\n})\nexport class InputFileFromWebcam {\n\n  @Element() el: HTMLElement;\n\n  @State() cameraState: CameraState = { status: 'inactive' };\n  @State() isFlipped: boolean = false;\n\n  /**\n   * Width of the video element\n   */\n  @Prop({reflect: true, mutable: true}) width?: number = 460\n\n  /**\n   * height of the video element\n   */\n  @Prop({reflect: true, mutable: true}) height?: number = 460\n\n  /**\n   * FacingModel optiones following https://developer.mozilla.org/en-US/docs/Web/API/MediaTrackConstraints/facingMode#value\n   */\n  @Prop({ mutable: true, reflect: true }) facingMode?: CameraDirection = CameraDirection.Front\n\n  /**\n   * Show camera controls (flip, capture button, etc)\n   */\n  @Prop() showControls?: boolean = true\n\n  /**\n   * Auto-start camera when component loads\n   */\n  @Prop() autoStart?: boolean = true\n\n  /**\n   * Image quality for captured photos (0.1 to 1.0)\n   */\n  @Prop() imageQuality?: number = 0.85\n\n  /**\n   * Enable flash effect when taking picture\n   */\n  @Prop() flashEffect?: boolean = true\n\n  /**\n   * Capture button text\n   */\n  @Prop() captureButtonText?: string = 'üì∏'\n\n  /**\n   * Flip camera button text\n   */\n  @Prop() flipButtonText?: string = 'üîÑ'\n\n  /**\n   * you can pass a function and override the canvas.drawImage function so you\n   * can change the image adding filters or any kind of magin in your image\n   * \n   * you just need to crear a function with all canvas.-drawImage arguments\n   * \n   * here you have the list of vars you get: videoElement, left, top, imgSize, imgSize, 0,0, canvas.width, canvas.height\n   */\n  @Prop() drawImageCb?: Function = null\n\n  /**\n   * Start the camera\n   */\n  @Method()\n  async startCamera(): Promise<void> {\n    try {\n      this.cameraState = { status: 'loading' };\n      await camera.initCamera(this.el, this.facingMode, this.drawImageCb);\n      this.cameraState = { status: 'ready' };\n      this.cameraStarted.emit();\n    } catch (error) {\n      const webcamError: WebcamError = {\n        type: this.getErrorType(error),\n        message: error.message || 'Unknown camera error'\n      };\n      this.cameraState = { status: 'error', error: webcamError };\n      this.cameraError.emit(webcamError);\n      throw error;\n    }\n  }\n\n  /**\n   * Stop the camera\n   */\n  @Method()\n  async stopCamera(): Promise<void> {\n    camera.resetCamera();\n    this.cameraState = { status: 'inactive' };\n    this.cameraStopped.emit();\n  }\n\n  /**\n   * Take a picture\n   * @returns a blob with the image\n   */\n  @Method()\n  async takePic(): Promise<Blob> {\n    try {\n      this.cameraState = { ...this.cameraState, status: 'capturing' };\n      \n      if (this.flashEffect) {\n        this.showFlashEffect();\n      }\n      \n      const pic = await camera.takePicture(this.imageQuality);\n      this.cameraState = { ...this.cameraState, status: 'ready' };\n      this.pictureTaken.emit(pic);\n      return pic;\n    } catch (error) {\n      this.cameraState = { ...this.cameraState, status: 'ready' };\n      throw error;\n    }\n  }\n\n  /**\n   * Reset camera\n   */\n  @Method()\n  async resetCamera(): Promise<void> {\n    await this.stopCamera();\n    if (this.autoStart) {\n      await this.startCamera();\n    }\n  }\n\n  /**\n   * Toogle webcam, for example in mobile show front or back camera\n   */\n  @Method()\n  async toggleCamera(): Promise<void>{\n    await this.__toogleFacingMode();\n  }\n\n\n  /**\n   * Event emitted when the user takes a picture\n   */\n  @Event({\n    eventName: 'pictureTaken',\n    composed: true,\n    cancelable: false,\n    bubbles: true,\n  }) pictureTaken: EventEmitter<Blob>;\n\n  /**\n   * Event emitted when facing mode changes\n   */\n  @Event({\n    eventName: 'facingModeChanged',\n    composed: true,\n    cancelable: false,\n    bubbles: true,\n  }) facingModeChanged: EventEmitter<CameraDirection>;\n\n  /**\n   * Event emitted when camera starts successfully\n   */\n  @Event({\n    eventName: 'cameraStarted',\n    composed: true,\n    cancelable: false,\n    bubbles: true,\n  }) cameraStarted: EventEmitter<void>;\n\n  /**\n   * Event emitted when camera stops\n   */\n  @Event({\n    eventName: 'cameraStopped',\n    composed: true,\n    cancelable: false,\n    bubbles: true,\n  }) cameraStopped: EventEmitter<void>;\n\n  /**\n   * Event emitted when camera encounters an error\n   */\n  @Event({\n    eventName: 'cameraError',\n    composed: true,\n    cancelable: false,\n    bubbles: true,\n  }) cameraError: EventEmitter<WebcamError>;\n\n\n\n  @Listen('click')\n  onClickHandler() {\n    if (this.cameraState.status === 'ready') {\n      this.takePic();\n    }\n  }\n\n  @Watch('facingMode')\n  async onFacingModeChange() {\n    if (this.cameraState.status === 'ready') {\n      await this.resetCamera();\n    }\n  }\n\n  /**\n   * Get error type from error object\n   */\n  private getErrorType(error: any): WebcamError['type'] {\n    if (error.name === 'NotAllowedError' || error.name === 'PermissionDeniedError') {\n      return 'permission';\n    }\n    if (error.name === 'NotFoundError' || error.name === 'DevicesNotFoundError') {\n      return 'device';\n    }\n    if (error.name === 'NotReadableError' || error.name === 'TrackStartError') {\n      return 'stream';\n    }\n    return 'unknown';\n  }\n\n  /**\n   * Show flash effect when taking picture\n   */\n  private showFlashEffect() {\n    const flashEl = this.el.shadowRoot?.querySelector('.flash-effect') as HTMLElement;\n    if (flashEl) {\n      flashEl.style.opacity = '1';\n      setTimeout(() => {\n        flashEl.style.opacity = '0';\n      }, 200);\n    }\n  }\n\n  /**\n   * Toggle webcam facing mode\n   */\n  private async __toogleFacingMode() {\n    const newFacingMode = (this.facingMode !== CameraDirection.Front) ? CameraDirection.Front : CameraDirection.Rear;\n    this.facingMode = newFacingMode;\n    this.facingModeChanged.emit(this.facingMode);\n  }\n\n  /**\n   * Handle capture button click\n   */\n  private async handleCaptureClick() {\n    if (this.cameraState.status === 'ready') {\n      await this.takePic();\n    }\n  }\n\n  /**\n   * Handle flip button click\n   */\n  private async handleFlipClick() {\n    await this.__toogleFacingMode();\n  }\n\n  /**\n   * Handle retry button click\n   */\n  private async handleRetryClick() {\n    await this.startCamera();\n  }\n\n \n\n  componentWillLoad() {\n    this.isFlipped = this.facingMode === CameraDirection.Front;\n  }\n  \n  async componentDidLoad() {\n    if (this.autoStart) {\n      await this.startCamera();\n    }\n  }\n\n  async disconnectedCallback() {\n    await this.stopCamera();\n  }\n\n  /**\n   * Render loading state\n   */\n  private renderLoadingState() {\n    return (\n      <div class=\"camera-state loading\">\n        <div class=\"spinner\"></div>\n        <p>Iniciando c√°mara...</p>\n      </div>\n    );\n  }\n\n  /**\n   * Render error state\n   */\n  private renderErrorState() {\n    const { error } = this.cameraState;\n    let errorMessage = 'Error desconocido';\n    let actionButton = null;\n\n    switch (error?.type) {\n      case 'permission':\n        errorMessage = 'Permiso de c√°mara denegado. Por favor, permite el acceso a la c√°mara.';\n        break;\n      case 'device':\n        errorMessage = 'No se encontr√≥ ninguna c√°mara disponible.';\n        break;\n      case 'stream':\n        errorMessage = 'Error al acceder a la c√°mara. Puede estar siendo usada por otra aplicaci√≥n.';\n        actionButton = (\n          <button class=\"retry-button\" onClick={() => this.handleRetryClick()}>\n            Reintentar\n          </button>\n        );\n        break;\n      default:\n        errorMessage = error?.message || 'Error desconocido al inicializar la c√°mara.';\n        actionButton = (\n          <button class=\"retry-button\" onClick={() => this.handleRetryClick()}>\n            Reintentar\n          </button>\n        );\n    }\n\n    return (\n      <div class=\"camera-state error\">\n        <div class=\"error-icon\">‚ö†Ô∏è</div>\n        <p class=\"error-message\">{errorMessage}</p>\n        {actionButton}\n      </div>\n    );\n  }\n\n  /**\n   * Render inactive state\n   */\n  private renderInactiveState() {\n    return (\n      <div class=\"camera-state inactive\">\n        <div class=\"inactive-icon\">üìπ</div>\n        <p>C√°mara inactiva</p>\n        <button class=\"start-button\" onClick={() => this.startCamera()}>\n          Iniciar C√°mara\n        </button>\n      </div>\n    );\n  }\n\n  /**\n   * Render camera controls\n   */\n  private renderControls() {\n    if (!this.showControls || (this.cameraState.status !== 'ready' && this.cameraState.status !== 'capturing')) {\n      return null;\n    }\n\n    const isCapturing = this.cameraState.status === 'capturing';\n\n    return (\n      <div class=\"camera-controls\">\n        <button \n          class=\"control-button flip-button\" \n          onClick={() => this.handleFlipClick()}\n          title=\"Cambiar c√°mara\"\n          disabled={isCapturing}\n        >\n          {this.flipButtonText}\n        </button>\n        <button \n          class=\"control-button capture-button\" \n          onClick={() => this.handleCaptureClick()}\n          title=\"Tomar foto\"\n          disabled={isCapturing}\n        >\n          {isCapturing ? '‚è≥' : this.captureButtonText}\n        </button>\n      </div>\n    );\n  }\n\n  render() {\n    const hostClasses = {\n      'camera-ready': this.cameraState.status === 'ready',\n      'camera-loading': this.cameraState.status === 'loading',\n      'camera-error': this.cameraState.status === 'error',\n      'camera-inactive': this.cameraState.status === 'inactive',\n      'camera-capturing': this.cameraState.status === 'capturing',\n      'flipped': this.isFlipped && this.facingMode === CameraDirection.Front\n    };\n\n    return (\n      <Host \n        style={{height: this.height+\"px\", width: this.width+\"px\"}}\n        class={hostClasses}\n      >\n        <slot name='before'></slot>\n        \n        {this.cameraState.status === 'loading' && this.renderLoadingState()}\n        {this.cameraState.status === 'error' && this.renderErrorState()}\n        {this.cameraState.status === 'inactive' && this.renderInactiveState()}\n        \n        <slot></slot>\n        \n        {this.flashEffect && <div class=\"flash-effect\"></div>}\n        {this.renderControls()}\n        \n        <slot name='after'></slot>\n      </Host>\n    );\n  }\n\n}\n"],"names":["createVideo","createCanvas","initWebcamToVideo","renderToCanvas","takePicture","CameraDirection","h","Host"],"mappings":";;;;;MAYa,SAAS,CAAA;IAOX,MAAM,UAAU,CAAE,aAA0B,EAAE,SAA0B,EAAE,cAAwB,IAAI,EAAA;QAEzG,IAAI,CAAC,WAAW,EAAE;AAElB,QAAA,IAAK,CAAC,IAAI,CAAC,OAAO,EAAG;AACjB,YAAA,IAAI,CAAC,OAAO,GAAGA,0BAAW,EAAE;;AAGhC,QAAA,IAAK,CAAC,IAAI,CAAC,MAAM,EAAG;AAChB,YAAA,IAAI,CAAC,MAAM,GAAGC,2BAAY,CAAC,aAAa,CAAC;AACzC,YAAA,aAAa,CAAC,WAAW,CAAC,IAAI,CAAC,MAAM,CAAC;;AAG1C,QAAAC,gCAAiB,CAAC,IAAI,CAAC,OAAO,EAAE,SAAS,CAAC;QAE1CC,6BAAc,CAAC,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,OAAO,EAAE,WAAW,CAAC;QAEtD,OAAO,IAAI,CAAC,MAAM;;IAIf,WAAW,GAAA;;QACd,IAAI,IAAI,CAAC,MAAM;AAAE,YAAA,CAAA,EAAA,GAAA,CAAA,EAAA,GAAA,IAAI,CAAC,MAAM,MAAE,IAAA,IAAA,EAAA,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAAA,EAAA,CAAA,cAAc,EAAE,MAAA,IAAA,IAAA,EAAA,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAAA,EAAA,CAAE,OAAO,CAAC,KAAK,IAAG;;AAC5D,gBAAA,KAAK,aAAL,KAAK,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAAL,KAAK,CAAE,IAAI,EAAE;gBACb,CAAA,EAAA,GAAA,IAAI,CAAC,MAAM,MAAA,IAAA,IAAA,EAAA,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAAA,EAAA,CAAE,WAAW,CAAC,KAAK,CAAC;AACnC,aAAC,CAAC;QACF,IAAI,IAAI,CAAC,OAAO;AAAE,YAAA,IAAI,CAAC,OAAO,CAAC,SAAS,GAAG,IAAI;;AAG5C,IAAA,MAAM,WAAW,CAAC,OAAA,GAAkB,IAAI,EAAA;QAC3C,OAAO,MAAMC,0BAAW,CAAC,IAAI,CAAC,MAAM,EAAE,OAAO,CAAC;;AAGrD;AAGM,MAAM,MAAM,GAAG,IAAI,SAAS,EAAE;;ACvDrC,MAAM,sBAAsB,GAAG,wzGAAwzG;;MCmB10G,mBAAmB,GAAA,MAAA;AALhC,IAAA,WAAA,CAAA,OAAA,EAAA;;;;;;;QASW,IAAA,CAAA,WAAW,GAAgB,EAAE,MAAM,EAAE,UAAU,EAAE;AACjD,QAAA,IAAS,CAAA,SAAA,GAAY,KAAK;AAEnC;;AAEG;AACmC,QAAA,IAAK,CAAA,KAAA,GAAY,GAAG;AAE1D;;AAEG;AACmC,QAAA,IAAM,CAAA,MAAA,GAAY,GAAG;AAE3D;;AAEG;AACqC,QAAA,IAAA,CAAA,UAAU,GAAqBC,8BAAe,CAAC,KAAK;AAE5F;;AAEG;AACK,QAAA,IAAY,CAAA,YAAA,GAAa,IAAI;AAErC;;AAEG;AACK,QAAA,IAAS,CAAA,SAAA,GAAa,IAAI;AAElC;;AAEG;AACK,QAAA,IAAY,CAAA,YAAA,GAAY,IAAI;AAEpC;;AAEG;AACK,QAAA,IAAW,CAAA,WAAA,GAAa,IAAI;AAEpC;;AAEG;AACK,QAAA,IAAiB,CAAA,iBAAA,GAAY,IAAI;AAEzC;;AAEG;AACK,QAAA,IAAc,CAAA,cAAA,GAAY,IAAI;AAEtC;;;;;;;AAOG;AACK,QAAA,IAAW,CAAA,WAAA,GAAc,IAAI;AA8VtC;AA5VC;;AAEG;AAEH,IAAA,MAAM,WAAW,GAAA;AACf,QAAA,IAAI;YACF,IAAI,CAAC,WAAW,GAAG,EAAE,MAAM,EAAE,SAAS,EAAE;AACxC,YAAA,MAAM,MAAM,CAAC,UAAU,CAAC,IAAI,CAAC,EAAE,EAAE,IAAI,CAAC,UAAU,EAAE,IAAI,CAAC,WAAW,CAAC;YACnE,IAAI,CAAC,WAAW,GAAG,EAAE,MAAM,EAAE,OAAO,EAAE;AACtC,YAAA,IAAI,CAAC,aAAa,CAAC,IAAI,EAAE;;QACzB,OAAO,KAAK,EAAE;AACd,YAAA,MAAM,WAAW,GAAgB;AAC/B,gBAAA,IAAI,EAAE,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC;AAC9B,gBAAA,OAAO,EAAE,KAAK,CAAC,OAAO,IAAI;aAC3B;AACD,YAAA,IAAI,CAAC,WAAW,GAAG,EAAE,MAAM,EAAE,OAAO,EAAE,KAAK,EAAE,WAAW,EAAE;AAC1D,YAAA,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,WAAW,CAAC;AAClC,YAAA,MAAM,KAAK;;;AAIf;;AAEG;AAEH,IAAA,MAAM,UAAU,GAAA;QACd,MAAM,CAAC,WAAW,EAAE;QACpB,IAAI,CAAC,WAAW,GAAG,EAAE,MAAM,EAAE,UAAU,EAAE;AACzC,QAAA,IAAI,CAAC,aAAa,CAAC,IAAI,EAAE;;AAG3B;;;AAGG;AAEH,IAAA,MAAM,OAAO,GAAA;AACX,QAAA,IAAI;YACF,IAAI,CAAC,WAAW,GAAA,MAAA,CAAA,MAAA,CAAA,MAAA,CAAA,MAAA,CAAA,EAAA,EAAQ,IAAI,CAAC,WAAW,CAAA,EAAA,EAAE,MAAM,EAAE,WAAW,EAAA,CAAE;AAE/D,YAAA,IAAI,IAAI,CAAC,WAAW,EAAE;gBACpB,IAAI,CAAC,eAAe,EAAE;;YAGxB,MAAM,GAAG,GAAG,MAAM,MAAM,CAAC,WAAW,CAAC,IAAI,CAAC,YAAY,CAAC;YACvD,IAAI,CAAC,WAAW,GAAA,MAAA,CAAA,MAAA,CAAA,MAAA,CAAA,MAAA,CAAA,EAAA,EAAQ,IAAI,CAAC,WAAW,CAAA,EAAA,EAAE,MAAM,EAAE,OAAO,EAAA,CAAE;AAC3D,YAAA,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,GAAG,CAAC;AAC3B,YAAA,OAAO,GAAG;;QACV,OAAO,KAAK,EAAE;YACd,IAAI,CAAC,WAAW,GAAA,MAAA,CAAA,MAAA,CAAA,MAAA,CAAA,MAAA,CAAA,EAAA,EAAQ,IAAI,CAAC,WAAW,CAAA,EAAA,EAAE,MAAM,EAAE,OAAO,EAAA,CAAE;AAC3D,YAAA,MAAM,KAAK;;;AAIf;;AAEG;AAEH,IAAA,MAAM,WAAW,GAAA;AACf,QAAA,MAAM,IAAI,CAAC,UAAU,EAAE;AACvB,QAAA,IAAI,IAAI,CAAC,SAAS,EAAE;AAClB,YAAA,MAAM,IAAI,CAAC,WAAW,EAAE;;;AAI5B;;AAEG;AAEH,IAAA,MAAM,YAAY,GAAA;AAChB,QAAA,MAAM,IAAI,CAAC,kBAAkB,EAAE;;IAyDjC,cAAc,GAAA;QACZ,IAAI,IAAI,CAAC,WAAW,CAAC,MAAM,KAAK,OAAO,EAAE;YACvC,IAAI,CAAC,OAAO,EAAE;;;AAKlB,IAAA,MAAM,kBAAkB,GAAA;QACtB,IAAI,IAAI,CAAC,WAAW,CAAC,MAAM,KAAK,OAAO,EAAE;AACvC,YAAA,MAAM,IAAI,CAAC,WAAW,EAAE;;;AAI5B;;AAEG;AACK,IAAA,YAAY,CAAC,KAAU,EAAA;AAC7B,QAAA,IAAI,KAAK,CAAC,IAAI,KAAK,iBAAiB,IAAI,KAAK,CAAC,IAAI,KAAK,uBAAuB,EAAE;AAC9E,YAAA,OAAO,YAAY;;AAErB,QAAA,IAAI,KAAK,CAAC,IAAI,KAAK,eAAe,IAAI,KAAK,CAAC,IAAI,KAAK,sBAAsB,EAAE;AAC3E,YAAA,OAAO,QAAQ;;AAEjB,QAAA,IAAI,KAAK,CAAC,IAAI,KAAK,kBAAkB,IAAI,KAAK,CAAC,IAAI,KAAK,iBAAiB,EAAE;AACzE,YAAA,OAAO,QAAQ;;AAEjB,QAAA,OAAO,SAAS;;AAGlB;;AAEG;IACK,eAAe,GAAA;;AACrB,QAAA,MAAM,OAAO,GAAG,CAAA,EAAA,GAAA,IAAI,CAAC,EAAE,CAAC,UAAU,MAAE,IAAA,IAAA,EAAA,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAAA,EAAA,CAAA,aAAa,CAAC,eAAe,CAAgB;QACjF,IAAI,OAAO,EAAE;AACX,YAAA,OAAO,CAAC,KAAK,CAAC,OAAO,GAAG,GAAG;YAC3B,UAAU,CAAC,MAAK;AACd,gBAAA,OAAO,CAAC,KAAK,CAAC,OAAO,GAAG,GAAG;aAC5B,EAAE,GAAG,CAAC;;;AAIX;;AAEG;AACK,IAAA,MAAM,kBAAkB,GAAA;QAC9B,MAAM,aAAa,GAAG,CAAC,IAAI,CAAC,UAAU,KAAKA,8BAAe,CAAC,KAAK,IAAIA,8BAAe,CAAC,KAAK,GAAGA,8BAAe,CAAC,IAAI;AAChH,QAAA,IAAI,CAAC,UAAU,GAAG,aAAa;QAC/B,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC;;AAG9C;;AAEG;AACK,IAAA,MAAM,kBAAkB,GAAA;QAC9B,IAAI,IAAI,CAAC,WAAW,CAAC,MAAM,KAAK,OAAO,EAAE;AACvC,YAAA,MAAM,IAAI,CAAC,OAAO,EAAE;;;AAIxB;;AAEG;AACK,IAAA,MAAM,eAAe,GAAA;AAC3B,QAAA,MAAM,IAAI,CAAC,kBAAkB,EAAE;;AAGjC;;AAEG;AACK,IAAA,MAAM,gBAAgB,GAAA;AAC5B,QAAA,MAAM,IAAI,CAAC,WAAW,EAAE;;IAK1B,iBAAiB,GAAA;QACf,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,UAAU,KAAKA,8BAAe,CAAC,KAAK;;AAG5D,IAAA,MAAM,gBAAgB,GAAA;AACpB,QAAA,IAAI,IAAI,CAAC,SAAS,EAAE;AAClB,YAAA,MAAM,IAAI,CAAC,WAAW,EAAE;;;AAI5B,IAAA,MAAM,oBAAoB,GAAA;AACxB,QAAA,MAAM,IAAI,CAAC,UAAU,EAAE;;AAGzB;;AAEG;IACK,kBAAkB,GAAA;AACxB,QAAA,QACEC,OAAA,CAAA,KAAA,EAAA,EAAK,KAAK,EAAC,sBAAsB,EAAA,EAC/BA,OAAK,CAAA,KAAA,EAAA,EAAA,KAAK,EAAC,SAAS,EAAO,CAAA,EAC3BA,OAA0B,CAAA,GAAA,EAAA,IAAA,EAAA,0BAAA,CAAA,CACtB;;AAIV;;AAEG;IACK,gBAAgB,GAAA;AACtB,QAAA,MAAM,EAAE,KAAK,EAAE,GAAG,IAAI,CAAC,WAAW;QAClC,IAAI,YAAY,GAAG,mBAAmB;QACtC,IAAI,YAAY,GAAG,IAAI;QAEvB,QAAQ,KAAK,aAAL,KAAK,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAAL,KAAK,CAAE,IAAI;AACjB,YAAA,KAAK,YAAY;gBACf,YAAY,GAAG,uEAAuE;gBACtF;AACF,YAAA,KAAK,QAAQ;gBACX,YAAY,GAAG,2CAA2C;gBAC1D;AACF,YAAA,KAAK,QAAQ;gBACX,YAAY,GAAG,6EAA6E;gBAC5F,YAAY,IACVA,OAAA,CAAA,QAAA,EAAA,EAAQ,KAAK,EAAC,cAAc,EAAC,OAAO,EAAE,MAAM,IAAI,CAAC,gBAAgB,EAAE,EAAA,EAAA,YAAA,CAE1D,CACV;gBACD;AACF,YAAA;gBACE,YAAY,GAAG,CAAA,KAAK,KAAL,IAAA,IAAA,KAAK,KAAL,KAAA,CAAA,GAAA,KAAA,CAAA,GAAA,KAAK,CAAE,OAAO,KAAI,6CAA6C;gBAC9E,YAAY,IACVA,OAAA,CAAA,QAAA,EAAA,EAAQ,KAAK,EAAC,cAAc,EAAC,OAAO,EAAE,MAAM,IAAI,CAAC,gBAAgB,EAAE,EAAA,EAAA,YAAA,CAE1D,CACV;;AAGL,QAAA,QACEA,OAAA,CAAA,KAAA,EAAA,EAAK,KAAK,EAAC,oBAAoB,EAAA,EAC7BA,OAAK,CAAA,KAAA,EAAA,EAAA,KAAK,EAAC,YAAY,EAAS,EAAA,cAAA,CAAA,EAChCA,OAAA,CAAA,GAAA,EAAA,EAAG,KAAK,EAAC,eAAe,EAAA,EAAE,YAAY,CAAK,EAC1C,YAAY,CACT;;AAIV;;AAEG;IACK,mBAAmB,GAAA;QACzB,QACEA,OAAA,CAAA,KAAA,EAAA,EAAK,KAAK,EAAC,uBAAuB,EAAA,EAChCA,OAAK,CAAA,KAAA,EAAA,EAAA,KAAK,EAAC,eAAe,EAAS,EAAA,cAAA,CAAA,EACnCA,OAAsB,CAAA,GAAA,EAAA,IAAA,EAAA,sBAAA,CAAA,EACtBA,OAAA,CAAA,QAAA,EAAA,EAAQ,KAAK,EAAC,cAAc,EAAC,OAAO,EAAE,MAAM,IAAI,CAAC,WAAW,EAAE,EAErD,EAAA,qBAAA,CAAA,CACL;;AAIV;;AAEG;IACK,cAAc,GAAA;QACpB,IAAI,CAAC,IAAI,CAAC,YAAY,KAAK,IAAI,CAAC,WAAW,CAAC,MAAM,KAAK,OAAO,IAAI,IAAI,CAAC,WAAW,CAAC,MAAM,KAAK,WAAW,CAAC,EAAE;AAC1G,YAAA,OAAO,IAAI;;QAGb,MAAM,WAAW,GAAG,IAAI,CAAC,WAAW,CAAC,MAAM,KAAK,WAAW;AAE3D,QAAA,QACEA,OAAA,CAAA,KAAA,EAAA,EAAK,KAAK,EAAC,iBAAiB,EAAA,EAC1BA,OACE,CAAA,QAAA,EAAA,EAAA,KAAK,EAAC,4BAA4B,EAClC,OAAO,EAAE,MAAM,IAAI,CAAC,eAAe,EAAE,EACrC,KAAK,EAAC,qBAAgB,EACtB,QAAQ,EAAE,WAAW,EAEpB,EAAA,IAAI,CAAC,cAAc,CACb,EACTA,OAAA,CAAA,QAAA,EAAA,EACE,KAAK,EAAC,+BAA+B,EACrC,OAAO,EAAE,MAAM,IAAI,CAAC,kBAAkB,EAAE,EACxC,KAAK,EAAC,YAAY,EAClB,QAAQ,EAAE,WAAW,EAEpB,EAAA,WAAW,GAAG,GAAG,GAAG,IAAI,CAAC,iBAAiB,CACpC,CACL;;IAIV,MAAM,GAAA;AACJ,QAAA,MAAM,WAAW,GAAG;AAClB,YAAA,cAAc,EAAE,IAAI,CAAC,WAAW,CAAC,MAAM,KAAK,OAAO;AACnD,YAAA,gBAAgB,EAAE,IAAI,CAAC,WAAW,CAAC,MAAM,KAAK,SAAS;AACvD,YAAA,cAAc,EAAE,IAAI,CAAC,WAAW,CAAC,MAAM,KAAK,OAAO;AACnD,YAAA,iBAAiB,EAAE,IAAI,CAAC,WAAW,CAAC,MAAM,KAAK,UAAU;AACzD,YAAA,kBAAkB,EAAE,IAAI,CAAC,WAAW,CAAC,MAAM,KAAK,WAAW;YAC3D,SAAS,EAAE,IAAI,CAAC,SAAS,IAAI,IAAI,CAAC,UAAU,KAAKD,8BAAe,CAAC;SAClE;AAED,QAAA,QACEC,OAAC,CAAAC,UAAI,EACH,EAAA,GAAA,EAAA,0CAAA,EAAA,KAAK,EAAE,EAAC,MAAM,EAAE,IAAI,CAAC,MAAM,GAAC,IAAI,EAAE,KAAK,EAAE,IAAI,CAAC,KAAK,GAAC,IAAI,EAAC,EACzD,KAAK,EAAE,WAAW,EAAA,EAElBD,OAAM,CAAA,MAAA,EAAA,EAAA,GAAA,EAAA,0CAAA,EAAA,IAAI,EAAC,QAAQ,EAAQ,CAAA,EAE1B,IAAI,CAAC,WAAW,CAAC,MAAM,KAAK,SAAS,IAAI,IAAI,CAAC,kBAAkB,EAAE,EAClE,IAAI,CAAC,WAAW,CAAC,MAAM,KAAK,OAAO,IAAI,IAAI,CAAC,gBAAgB,EAAE,EAC9D,IAAI,CAAC,WAAW,CAAC,MAAM,KAAK,UAAU,IAAI,IAAI,CAAC,mBAAmB,EAAE,EAErEA,OAAa,CAAA,MAAA,EAAA,EAAA,GAAA,EAAA,0CAAA,EAAA,CAAA,EAEZ,IAAI,CAAC,WAAW,IAAIA,kEAAK,KAAK,EAAC,cAAc,EAAO,CAAA,EACpD,IAAI,CAAC,cAAc,EAAE,EAEtBA,OAAA,CAAA,MAAA,EAAA,EAAA,GAAA,EAAA,0CAAA,EAAM,IAAI,EAAC,OAAO,EAAQ,CAAA,CACrB;;;;;;;;;;;"}