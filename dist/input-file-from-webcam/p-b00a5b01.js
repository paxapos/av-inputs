import{r as t,c as e,h as n,H as s,g as o}from"./p-b64684d5.js";
/*! Capacitor: https://capacitorjs.com/ - MIT License */var i;(function(t){t["Unimplemented"]="UNIMPLEMENTED";t["Unavailable"]="UNAVAILABLE"})(i||(i={}));class r extends Error{constructor(t,e,n){super(t);this.message=t;this.code=e;this.data=n}}const a=t=>{var e,n;if(t===null||t===void 0?void 0:t.androidBridge){return"android"}else if((n=(e=t===null||t===void 0?void 0:t.webkit)===null||e===void 0?void 0:e.messageHandlers)===null||n===void 0?void 0:n.bridge){return"ios"}else{return"web"}};const c=t=>{var e,n,s,o,c;const l=t.CapacitorCustomPlatform||null;const d=t.Capacitor||{};const u=d.Plugins=d.Plugins||{};const h=t.CapacitorPlatforms;const f=()=>l!==null?l.name:a(t);const v=((e=h===null||h===void 0?void 0:h.currentPlatform)===null||e===void 0?void 0:e.getPlatform)||f;const m=()=>v()!=="web";const p=((n=h===null||h===void 0?void 0:h.currentPlatform)===null||n===void 0?void 0:n.isNativePlatform)||m;const w=t=>{const e=O.get(t);if(e===null||e===void 0?void 0:e.platforms.has(v())){return true}if(g(t)){return true}return false};const y=((s=h===null||h===void 0?void 0:h.currentPlatform)===null||s===void 0?void 0:s.isPluginAvailable)||w;const b=t=>{var e;return(e=d.PluginHeaders)===null||e===void 0?void 0:e.find((e=>e.name===t))};const g=((o=h===null||h===void 0?void 0:h.currentPlatform)===null||o===void 0?void 0:o.getPluginHeader)||b;const C=e=>t.console.error(e);const j=(t,e,n)=>Promise.reject(`${n} does not have an implementation of "${e}".`);const O=new Map;const $=(t,e={})=>{const n=O.get(t);if(n){console.warn(`Capacitor plugin "${t}" already registered. Cannot register plugins twice.`);return n.proxy}const s=v();const o=g(t);let a;const c=async()=>{if(!a&&s in e){a=typeof e[s]==="function"?a=await e[s]():a=e[s]}else if(l!==null&&!a&&"web"in e){a=typeof e["web"]==="function"?a=await e["web"]():a=e["web"]}return a};const h=(e,n)=>{var a,c;if(o){const s=o===null||o===void 0?void 0:o.methods.find((t=>n===t.name));if(s){if(s.rtype==="promise"){return e=>d.nativePromise(t,n.toString(),e)}else{return(e,s)=>d.nativeCallback(t,n.toString(),e,s)}}else if(e){return(a=e[n])===null||a===void 0?void 0:a.bind(e)}}else if(e){return(c=e[n])===null||c===void 0?void 0:c.bind(e)}else{throw new r(`"${t}" plugin is not implemented on ${s}`,i.Unimplemented)}};const f=e=>{let n;const o=(...o)=>{const a=c().then((a=>{const c=h(a,e);if(c){const t=c(...o);n=t===null||t===void 0?void 0:t.remove;return t}else{throw new r(`"${t}.${e}()" is not implemented on ${s}`,i.Unimplemented)}}));if(e==="addListener"){a.remove=async()=>n()}return a};o.toString=()=>`${e.toString()}() { [capacitor code] }`;Object.defineProperty(o,"name",{value:e,writable:false,configurable:false});return o};const m=f("addListener");const p=f("removeListener");const w=(t,e)=>{const n=m({eventName:t},e);const s=async()=>{const s=await n;p({eventName:t,callbackId:s},e)};const o=new Promise((t=>n.then((()=>t({remove:s})))));o.remove=async()=>{console.warn(`Using addListener() without 'await' is deprecated.`);await s()};return o};const y=new Proxy({},{get(t,e){switch(e){case"$$typeof":return undefined;case"toJSON":return()=>({});case"addListener":return o?w:m;case"removeListener":return p;default:return f(e)}}});u[t]=y;O.set(t,{name:t,proxy:y,platforms:new Set([...Object.keys(e),...o?[s]:[]])});return y};const P=((c=h===null||h===void 0?void 0:h.currentPlatform)===null||c===void 0?void 0:c.registerPlugin)||$;if(!d.convertFileSrc){d.convertFileSrc=t=>t}d.getPlatform=v;d.handleError=C;d.isNativePlatform=p;d.isPluginAvailable=y;d.pluginMethodNoop=j;d.registerPlugin=P;d.Exception=r;d.DEBUG=!!d.DEBUG;d.isLoggingEnabled=!!d.isLoggingEnabled;d.platform=d.getPlatform();d.isNative=d.isNativePlatform();return d};const l=t=>t.Capacitor=c(t);const d=l(typeof globalThis!=="undefined"?globalThis:typeof self!=="undefined"?self:typeof window!=="undefined"?window:typeof global!=="undefined"?global:{});const u=d.registerPlugin;class h{constructor(t){this.listeners={};this.windowListeners={};if(t){console.warn(`Capacitor WebPlugin "${t.name}" config object was deprecated in v3 and will be removed in v4.`);this.config=t}}addListener(t,e){const n=this.listeners[t];if(!n){this.listeners[t]=[]}this.listeners[t].push(e);const s=this.windowListeners[t];if(s&&!s.registered){this.addWindowListener(s)}const o=async()=>this.removeListener(t,e);const i=Promise.resolve({remove:o});Object.defineProperty(i,"remove",{value:async()=>{console.warn(`Using addListener() without 'await' is deprecated.`);await o()}});return i}async removeAllListeners(){this.listeners={};for(const t in this.windowListeners){this.removeWindowListener(this.windowListeners[t])}this.windowListeners={}}notifyListeners(t,e){const n=this.listeners[t];if(n){n.forEach((t=>t(e)))}}hasListeners(t){return!!this.listeners[t].length}registerWindowListener(t,e){this.windowListeners[e]={registered:false,windowEventName:t,pluginEventName:e,handler:t=>{this.notifyListeners(e,t)}}}unimplemented(t="not implemented"){return new d.Exception(t,i.Unimplemented)}unavailable(t="not available"){return new d.Exception(t,i.Unavailable)}async removeListener(t,e){const n=this.listeners[t];if(!n){return}const s=n.indexOf(e);this.listeners[t].splice(s,1);if(!this.listeners[t].length){this.removeWindowListener(this.windowListeners[t])}}addWindowListener(t){window.addEventListener(t.windowEventName,t.handler);t.registered=true}removeWindowListener(t){if(!t){return}window.removeEventListener(t.windowEventName,t.handler);t.registered=false}}const f=t=>encodeURIComponent(t).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);const v=t=>t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class m extends h{async getCookies(){const t=document.cookie;const e={};t.split(";").forEach((t=>{if(t.length<=0)return;let[n,s]=t.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");n=v(n).trim();s=v(s).trim();e[n]=s}));return e}async setCookie(t){try{const e=f(t.key);const n=f(t.value);const s=`; expires=${(t.expires||"").replace("expires=","")}`;const o=(t.path||"/").replace("path=","");const i=t.url!=null&&t.url.length>0?`domain=${t.url}`:"";document.cookie=`${e}=${n||""}${s}; path=${o}; ${i};`}catch(t){return Promise.reject(t)}}async deleteCookie(t){try{document.cookie=`${t.key}=; Max-Age=0`}catch(t){return Promise.reject(t)}}async clearCookies(){try{const t=document.cookie.split(";")||[];for(const e of t){document.cookie=e.replace(/^ +/,"").replace(/=.*/,`=;expires=${(new Date).toUTCString()};path=/`)}}catch(t){return Promise.reject(t)}}async clearAllCookies(){try{await this.clearCookies()}catch(t){return Promise.reject(t)}}}u("CapacitorCookies",{web:()=>new m});const p=async t=>new Promise(((e,n)=>{const s=new FileReader;s.onload=()=>{const t=s.result;e(t.indexOf(",")>=0?t.split(",")[1]:t)};s.onerror=t=>n(t);s.readAsDataURL(t)}));const w=(t={})=>{const e=Object.keys(t);const n=Object.keys(t).map((t=>t.toLocaleLowerCase()));const s=n.reduce(((n,s,o)=>{n[s]=t[e[o]];return n}),{});return s};const y=(t,e=true)=>{if(!t)return null;const n=Object.entries(t).reduce(((t,n)=>{const[s,o]=n;let i;let r;if(Array.isArray(o)){r="";o.forEach((t=>{i=e?encodeURIComponent(t):t;r+=`${s}=${i}&`}));r.slice(0,-1)}else{i=e?encodeURIComponent(o):o;r=`${s}=${i}`}return`${t}&${r}`}),"");return n.substr(1)};const b=(t,e={})=>{const n=Object.assign({method:t.method||"GET",headers:t.headers},e);const s=w(t.headers);const o=s["content-type"]||"";if(typeof t.data==="string"){n.body=t.data}else if(o.includes("application/x-www-form-urlencoded")){const e=new URLSearchParams;for(const[n,s]of Object.entries(t.data||{})){e.set(n,s)}n.body=e.toString()}else if(o.includes("multipart/form-data")){const e=new FormData;if(t.data instanceof FormData){t.data.forEach(((t,n)=>{e.append(n,t)}))}else{for(const n of Object.keys(t.data)){e.append(n,t.data[n])}}n.body=e;const s=new Headers(n.headers);s.delete("content-type");n.headers=s}else if(o.includes("application/json")||typeof t.data==="object"){n.body=JSON.stringify(t.data)}return n};class g extends h{async request(t){const e=b(t,t.webFetchExtra);const n=y(t.params,t.shouldEncodeUrlParams);const s=n?`${t.url}?${n}`:t.url;const o=await fetch(s,e);const i=o.headers.get("content-type")||"";let{responseType:r="text"}=o.ok?t:{};if(i.includes("application/json")){r="json"}let a;let c;switch(r){case"arraybuffer":case"blob":c=await o.blob();a=await p(c);break;case"json":a=await o.json();break;case"document":case"text":default:a=await o.text()}const l={};o.headers.forEach(((t,e)=>{l[e]=t}));return{data:a,headers:l,status:o.status,url:o.url}}async get(t){return this.request(Object.assign(Object.assign({},t),{method:"GET"}))}async post(t){return this.request(Object.assign(Object.assign({},t),{method:"POST"}))}async put(t){return this.request(Object.assign(Object.assign({},t),{method:"PUT"}))}async patch(t){return this.request(Object.assign(Object.assign({},t),{method:"PATCH"}))}async delete(t){return this.request(Object.assign(Object.assign({},t),{method:"DELETE"}))}}u("CapacitorHttp",{web:()=>new g});var C;(function(t){t["Prompt"]="PROMPT";t["Camera"]="CAMERA";t["Photos"]="PHOTOS"})(C||(C={}));var j;(function(t){t["Rear"]="REAR";t["Front"]="FRONT"})(j||(j={}));var O;(function(t){t["Uri"]="uri";t["Base64"]="base64";t["DataUrl"]="dataUrl"})(O||(O={}));const $=u("Camera",{web:()=>import("./p-88b3e77a.js").then((t=>new t.CameraWeb))});class P{constructor(){}async initCamera(t,e,n=null){this.resetCamera();if(!this.elVideo){this.elVideo=document.createElement("video");this.elVideo.autoplay=true;this.elVideo.style.display="none";t.appendChild(this.elVideo)}if(!this.canvas){this.canvas=document.createElement("canvas");this.canvas.width=parseInt(t.getAttribute("width"));this.canvas.height=parseInt(t.getAttribute("height"));t.appendChild(this.canvas)}this.direction=j.Front;if(navigator.mediaDevices.getUserMedia){console.info("la camara");const t=e==j.Front?"user":"environment";navigator.mediaDevices.getUserMedia({audio:false,video:{width:{min:200},height:{min:200},facingMode:t}}).then((t=>{this.stream=t;console.info("la camara",this.stream);this.elVideo.srcObject=this.stream;this.renderToCanvas(n)})).catch((function(t){console.log("Something went wrong!",t)}))}}renderToCanvas(t=null){let e=this.canvas.getContext("2d");let n=this.elVideo.videoWidth;let s=this.elVideo.videoHeight;var o=Math.min(n,s);var i=(n-o)/2;var r=(s-o)/2;if(typeof t=="function"){t.call(e,this.elVideo,i,r,o,o,0,0,this.canvas.width,this.canvas.height)}else{e.drawImage(this.elVideo,i,r,o,o,0,0,this.canvas.width,this.canvas.height)}requestAnimationFrame((()=>this.renderToCanvas()))}resetCamera(){var t,e;if(this.stream)(e=(t=this.stream)===null||t===void 0?void 0:t.getVideoTracks())===null||e===void 0?void 0:e.forEach((t=>{var e;t===null||t===void 0?void 0:t.stop();(e=this.stream)===null||e===void 0?void 0:e.removeTrack(t)}));if(this.elVideo)this.elVideo.srcObject=null}async takePicture(){return new Promise(((t,e)=>{try{this.canvas.toBlob((e=>{const n="pic_"+Math.abs(Math.round(Math.random()*1e3));var s=new File([e],n,{type:"image/jpeg"});t(s)}),"image/jpeg",.8)}catch(t){e(t)}}))}}class x{async initCamera(){}async takePicture(){const t=await $.getPhoto({quality:90,allowEditing:true,direction:j.Front,resultType:O.Base64});const e=t.base64String;const n="image/jpeg";const s=atob(e);const o=new Array(s.length);for(let t=0;t<s.length;t++){o[t]=s.charCodeAt(t)}const i=new Uint8Array(o);const r=new Blob([i],{type:n});return r}resetCamera(){}}class L{constructor(){if(d.getPlatform()==="web"){this.camaraManager=new P}else{this.camaraManager=new x}}async initCamera(t,e,n=null){this.camaraManager.initCamera(t,e,n)}async takePicture(){return await this.camaraManager.takePicture()}async resetCamera(){}}const k=new L;const E=":host{display:inline-block;width:100px;filter:drop-shadow(2px 4px 6px black);border:#5a5252 1px solid;border-style:groove}video{display:none}canvas{width:100%;height:100%}";const A=class{constructor(n){t(this,n);this.pictureTaken=e(this,"pictureTaken",6);this.facingModeChanged=e(this,"facingModeChanged",6);this.width=460;this.height=460;this.facingMode=j.Front;this.drawImageCb=null}async takePic(){const t=await k.takePicture();this.pictureTaken.emit(t);return t}async toggleCamera(){this.__toogleFacingMode()}onClickHandler(){this.__toogleFacingMode()}__toogleFacingMode(){this.facingMode=this.facingMode!=j.Front?j.Front:j.Rear;this.facingModeChanged.emit(this.facingMode)}componentWillMount(){}async componentDidRender(){k.initCamera(this.el,j.Front,this.drawImageCb)}async disconnectedCallback(){k.resetCamera()}render(){return n(s,{style:{height:this.height+"px",width:this.width+"px"}},n("slot",{name:"before"}),n("slot",null),n("slot",{name:"after"}))}get el(){return o(this)}};A.style=E;export{C,A as I,h as W,j as a,r as b};
//# sourceMappingURL=p-b00a5b01.js.map