{"version":3,"names":["ExceptionCode","CapacitorException","Error","constructor","message","code","data","super","this","getPlatformId","win","_a","_b","androidBridge","webkit","messageHandlers","bridge","createCapacitor","_c","_d","_e","capCustomPlatform","CapacitorCustomPlatform","cap","Capacitor","Plugins","capPlatforms","CapacitorPlatforms","defaultGetPlatform","name","getPlatform","currentPlatform","defaultIsNativePlatform","isNativePlatform","defaultIsPluginAvailable","pluginName","plugin","registeredPlugins","get","platforms","has","getPluginHeader","isPluginAvailable","defaultGetPluginHeader","PluginHeaders","find","h","handleError","err","console","error","pluginMethodNoop","_target","prop","Promise","reject","Map","defaultRegisterPlugin","jsImplementations","registeredPlugin","warn","proxy","platform","pluginHeader","jsImplementation","loadPluginImplementation","async","createPluginMethod","impl","methodHeader","methods","m","rtype","options","nativePromise","toString","callback","nativeCallback","bind","Unimplemented","createPluginMethodWrapper","remove","wrapper","args","p","then","fn","Object","defineProperty","value","writable","configurable","addListener","removeListener","addListenerNative","eventName","call","callbackId","resolve","Proxy","_","undefined","set","Set","keys","registerPlugin","convertFileSrc","filePath","Exception","DEBUG","isLoggingEnabled","isNative","initCapacitorGlobal","globalThis","self","window","global","WebPlugin","config","listeners","windowListeners","listenerFunc","push","windowListener","registered","addWindowListener","listener","removeWindowListener","notifyListeners","forEach","hasListeners","length","registerWindowListener","windowEventName","pluginEventName","handler","event","unimplemented","msg","unavailable","Unavailable","index","indexOf","splice","handle","addEventListener","removeEventListener","encode","str","encodeURIComponent","replace","decodeURIComponent","escape","decode","CapacitorCookiesPluginWeb","cookies","document","cookie","cookieMap","split","key","trim","encodedKey","encodedValue","expires","path","domain","url","Date","toUTCString","clearCookies","web","readBlobAsBase64","blob","reader","FileReader","onload","base64String","result","onerror","readAsDataURL","normalizeHttpHeaders","headers","originalKeys","loweredKeys","map","k","toLocaleLowerCase","normalized","reduce","acc","buildUrlParams","params","shouldEncode","output","entries","accumulator","entry","item","Array","isArray","slice","substr","buildRequestInit","extra","assign","method","type","body","includes","URLSearchParams","form","FormData","append","Headers","delete","JSON","stringify","CapacitorHttpPluginWeb","requestInit","webFetchExtra","urlParams","shouldEncodeUrlParams","response","fetch","contentType","responseType","ok","json","text","status","request","CameraSource","CameraDirection","CameraResultType","Camera","import","CameraWeb","WebCamera","parentElement","direction","drawImageCb","resetCamera","elVideo","createElement","autoplay","style","display","appendChild","canvas","width","parseInt","getAttribute","height","Front","navigator","mediaDevices","getUserMedia","info","facingMode","audio","video","min","stream","srcObject","renderToCanvas","catch","err0r","log","ctx","getContext","imgWidth","videoWidth","imgHeight","videoHeight","imgSize","Math","left","top","drawImage","requestAnimationFrame","getVideoTracks","track","stop","removeTrack","toBlob","filename","abs","round","random","file","File","CapacitorCamera","image","getPhoto","quality","allowEditing","resultType","Base64","base64Data","byteCharacters","atob","byteNumbers","i","charCodeAt","byteArray","Uint8Array","Blob","CameraService","camaraManager","cameraDirection","initCamera","takePicture","camera","inputFileFromWebcamCss","InputFileFromWebcam","pic","pictureTaken","emit","__toogleFacingMode","onClickHandler","Rear","facingModeChanged","componentWillMount","el","render","Host"],"sources":["./node_modules/@capacitor/core/dist/index.js","./node_modules/@capacitor/camera/dist/esm/definitions.js","./node_modules/@capacitor/camera/dist/esm/index.js","./src/utils/camera.ts","./src/components/input-file-from-webcam/input-file-from-webcam.css?tag=input-file-from-webcam&encapsulation=shadow","./src/components/input-file-from-webcam/input-file-from-webcam.tsx"],"sourcesContent":["/*! Capacitor: https://capacitorjs.com/ - MIT License */\nconst createCapacitorPlatforms = (win) => {\n    const defaultPlatformMap = new Map();\n    defaultPlatformMap.set('web', { name: 'web' });\n    const capPlatforms = win.CapacitorPlatforms || {\n        currentPlatform: { name: 'web' },\n        platforms: defaultPlatformMap,\n    };\n    const addPlatform = (name, platform) => {\n        capPlatforms.platforms.set(name, platform);\n    };\n    const setPlatform = (name) => {\n        if (capPlatforms.platforms.has(name)) {\n            capPlatforms.currentPlatform = capPlatforms.platforms.get(name);\n        }\n    };\n    capPlatforms.addPlatform = addPlatform;\n    capPlatforms.setPlatform = setPlatform;\n    return capPlatforms;\n};\nconst initPlatforms = (win) => (win.CapacitorPlatforms = createCapacitorPlatforms(win));\n/**\n * @deprecated Set `CapacitorCustomPlatform` on the window object prior to runtime executing in the web app instead\n */\nconst CapacitorPlatforms = /*#__PURE__*/ initPlatforms((typeof globalThis !== 'undefined'\n    ? globalThis\n    : typeof self !== 'undefined'\n        ? self\n        : typeof window !== 'undefined'\n            ? window\n            : typeof global !== 'undefined'\n                ? global\n                : {}));\n/**\n * @deprecated Set `CapacitorCustomPlatform` on the window object prior to runtime executing in the web app instead\n */\nconst addPlatform = CapacitorPlatforms.addPlatform;\n/**\n * @deprecated Set `CapacitorCustomPlatform` on the window object prior to runtime executing in the web app instead\n */\nconst setPlatform = CapacitorPlatforms.setPlatform;\n\nconst legacyRegisterWebPlugin = (cap, webPlugin) => {\n    var _a;\n    const config = webPlugin.config;\n    const Plugins = cap.Plugins;\n    if (!config || !config.name) {\n        // TODO: add link to upgrade guide\n        throw new Error(`Capacitor WebPlugin is using the deprecated \"registerWebPlugin()\" function, but without the config. Please use \"registerPlugin()\" instead to register this web plugin.\"`);\n    }\n    // TODO: add link to upgrade guide\n    console.warn(`Capacitor plugin \"${config.name}\" is using the deprecated \"registerWebPlugin()\" function`);\n    if (!Plugins[config.name] || ((_a = config === null || config === void 0 ? void 0 : config.platforms) === null || _a === void 0 ? void 0 : _a.includes(cap.getPlatform()))) {\n        // Add the web plugin into the plugins registry if there already isn't\n        // an existing one. If it doesn't already exist, that means\n        // there's no existing native implementation for it.\n        // - OR -\n        // If we already have a plugin registered (meaning it was defined in the native layer),\n        // then we should only overwrite it if the corresponding web plugin activates on\n        // a certain platform. For example: Geolocation uses the WebPlugin on Android but not iOS\n        Plugins[config.name] = webPlugin;\n    }\n};\n\nvar ExceptionCode;\n(function (ExceptionCode) {\n    /**\n     * API is not implemented.\n     *\n     * This usually means the API can't be used because it is not implemented for\n     * the current platform.\n     */\n    ExceptionCode[\"Unimplemented\"] = \"UNIMPLEMENTED\";\n    /**\n     * API is not available.\n     *\n     * This means the API can't be used right now because:\n     *   - it is currently missing a prerequisite, such as network connectivity\n     *   - it requires a particular platform or browser version\n     */\n    ExceptionCode[\"Unavailable\"] = \"UNAVAILABLE\";\n})(ExceptionCode || (ExceptionCode = {}));\nclass CapacitorException extends Error {\n    constructor(message, code, data) {\n        super(message);\n        this.message = message;\n        this.code = code;\n        this.data = data;\n    }\n}\nconst getPlatformId = (win) => {\n    var _a, _b;\n    if (win === null || win === void 0 ? void 0 : win.androidBridge) {\n        return 'android';\n    }\n    else if ((_b = (_a = win === null || win === void 0 ? void 0 : win.webkit) === null || _a === void 0 ? void 0 : _a.messageHandlers) === null || _b === void 0 ? void 0 : _b.bridge) {\n        return 'ios';\n    }\n    else {\n        return 'web';\n    }\n};\n\nconst createCapacitor = (win) => {\n    var _a, _b, _c, _d, _e;\n    const capCustomPlatform = win.CapacitorCustomPlatform || null;\n    const cap = win.Capacitor || {};\n    const Plugins = (cap.Plugins = cap.Plugins || {});\n    /**\n     * @deprecated Use `capCustomPlatform` instead, default functions like registerPlugin will function with the new object.\n     */\n    const capPlatforms = win.CapacitorPlatforms;\n    const defaultGetPlatform = () => {\n        return capCustomPlatform !== null\n            ? capCustomPlatform.name\n            : getPlatformId(win);\n    };\n    const getPlatform = ((_a = capPlatforms === null || capPlatforms === void 0 ? void 0 : capPlatforms.currentPlatform) === null || _a === void 0 ? void 0 : _a.getPlatform) || defaultGetPlatform;\n    const defaultIsNativePlatform = () => getPlatform() !== 'web';\n    const isNativePlatform = ((_b = capPlatforms === null || capPlatforms === void 0 ? void 0 : capPlatforms.currentPlatform) === null || _b === void 0 ? void 0 : _b.isNativePlatform) || defaultIsNativePlatform;\n    const defaultIsPluginAvailable = (pluginName) => {\n        const plugin = registeredPlugins.get(pluginName);\n        if (plugin === null || plugin === void 0 ? void 0 : plugin.platforms.has(getPlatform())) {\n            // JS implementation available for the current platform.\n            return true;\n        }\n        if (getPluginHeader(pluginName)) {\n            // Native implementation available.\n            return true;\n        }\n        return false;\n    };\n    const isPluginAvailable = ((_c = capPlatforms === null || capPlatforms === void 0 ? void 0 : capPlatforms.currentPlatform) === null || _c === void 0 ? void 0 : _c.isPluginAvailable) ||\n        defaultIsPluginAvailable;\n    const defaultGetPluginHeader = (pluginName) => { var _a; return (_a = cap.PluginHeaders) === null || _a === void 0 ? void 0 : _a.find(h => h.name === pluginName); };\n    const getPluginHeader = ((_d = capPlatforms === null || capPlatforms === void 0 ? void 0 : capPlatforms.currentPlatform) === null || _d === void 0 ? void 0 : _d.getPluginHeader) || defaultGetPluginHeader;\n    const handleError = (err) => win.console.error(err);\n    const pluginMethodNoop = (_target, prop, pluginName) => {\n        return Promise.reject(`${pluginName} does not have an implementation of \"${prop}\".`);\n    };\n    const registeredPlugins = new Map();\n    const defaultRegisterPlugin = (pluginName, jsImplementations = {}) => {\n        const registeredPlugin = registeredPlugins.get(pluginName);\n        if (registeredPlugin) {\n            console.warn(`Capacitor plugin \"${pluginName}\" already registered. Cannot register plugins twice.`);\n            return registeredPlugin.proxy;\n        }\n        const platform = getPlatform();\n        const pluginHeader = getPluginHeader(pluginName);\n        let jsImplementation;\n        const loadPluginImplementation = async () => {\n            if (!jsImplementation && platform in jsImplementations) {\n                jsImplementation =\n                    typeof jsImplementations[platform] === 'function'\n                        ? (jsImplementation = await jsImplementations[platform]())\n                        : (jsImplementation = jsImplementations[platform]);\n            }\n            else if (capCustomPlatform !== null &&\n                !jsImplementation &&\n                'web' in jsImplementations) {\n                jsImplementation =\n                    typeof jsImplementations['web'] === 'function'\n                        ? (jsImplementation = await jsImplementations['web']())\n                        : (jsImplementation = jsImplementations['web']);\n            }\n            return jsImplementation;\n        };\n        const createPluginMethod = (impl, prop) => {\n            var _a, _b;\n            if (pluginHeader) {\n                const methodHeader = pluginHeader === null || pluginHeader === void 0 ? void 0 : pluginHeader.methods.find(m => prop === m.name);\n                if (methodHeader) {\n                    if (methodHeader.rtype === 'promise') {\n                        return (options) => cap.nativePromise(pluginName, prop.toString(), options);\n                    }\n                    else {\n                        return (options, callback) => cap.nativeCallback(pluginName, prop.toString(), options, callback);\n                    }\n                }\n                else if (impl) {\n                    return (_a = impl[prop]) === null || _a === void 0 ? void 0 : _a.bind(impl);\n                }\n            }\n            else if (impl) {\n                return (_b = impl[prop]) === null || _b === void 0 ? void 0 : _b.bind(impl);\n            }\n            else {\n                throw new CapacitorException(`\"${pluginName}\" plugin is not implemented on ${platform}`, ExceptionCode.Unimplemented);\n            }\n        };\n        const createPluginMethodWrapper = (prop) => {\n            let remove;\n            const wrapper = (...args) => {\n                const p = loadPluginImplementation().then(impl => {\n                    const fn = createPluginMethod(impl, prop);\n                    if (fn) {\n                        const p = fn(...args);\n                        remove = p === null || p === void 0 ? void 0 : p.remove;\n                        return p;\n                    }\n                    else {\n                        throw new CapacitorException(`\"${pluginName}.${prop}()\" is not implemented on ${platform}`, ExceptionCode.Unimplemented);\n                    }\n                });\n                if (prop === 'addListener') {\n                    p.remove = async () => remove();\n                }\n                return p;\n            };\n            // Some flair ✨\n            wrapper.toString = () => `${prop.toString()}() { [capacitor code] }`;\n            Object.defineProperty(wrapper, 'name', {\n                value: prop,\n                writable: false,\n                configurable: false,\n            });\n            return wrapper;\n        };\n        const addListener = createPluginMethodWrapper('addListener');\n        const removeListener = createPluginMethodWrapper('removeListener');\n        const addListenerNative = (eventName, callback) => {\n            const call = addListener({ eventName }, callback);\n            const remove = async () => {\n                const callbackId = await call;\n                removeListener({\n                    eventName,\n                    callbackId,\n                }, callback);\n            };\n            const p = new Promise(resolve => call.then(() => resolve({ remove })));\n            p.remove = async () => {\n                console.warn(`Using addListener() without 'await' is deprecated.`);\n                await remove();\n            };\n            return p;\n        };\n        const proxy = new Proxy({}, {\n            get(_, prop) {\n                switch (prop) {\n                    // https://github.com/facebook/react/issues/20030\n                    case '$$typeof':\n                        return undefined;\n                    case 'toJSON':\n                        return () => ({});\n                    case 'addListener':\n                        return pluginHeader ? addListenerNative : addListener;\n                    case 'removeListener':\n                        return removeListener;\n                    default:\n                        return createPluginMethodWrapper(prop);\n                }\n            },\n        });\n        Plugins[pluginName] = proxy;\n        registeredPlugins.set(pluginName, {\n            name: pluginName,\n            proxy,\n            platforms: new Set([\n                ...Object.keys(jsImplementations),\n                ...(pluginHeader ? [platform] : []),\n            ]),\n        });\n        return proxy;\n    };\n    const registerPlugin = ((_e = capPlatforms === null || capPlatforms === void 0 ? void 0 : capPlatforms.currentPlatform) === null || _e === void 0 ? void 0 : _e.registerPlugin) || defaultRegisterPlugin;\n    // Add in convertFileSrc for web, it will already be available in native context\n    if (!cap.convertFileSrc) {\n        cap.convertFileSrc = filePath => filePath;\n    }\n    cap.getPlatform = getPlatform;\n    cap.handleError = handleError;\n    cap.isNativePlatform = isNativePlatform;\n    cap.isPluginAvailable = isPluginAvailable;\n    cap.pluginMethodNoop = pluginMethodNoop;\n    cap.registerPlugin = registerPlugin;\n    cap.Exception = CapacitorException;\n    cap.DEBUG = !!cap.DEBUG;\n    cap.isLoggingEnabled = !!cap.isLoggingEnabled;\n    // Deprecated props\n    cap.platform = cap.getPlatform();\n    cap.isNative = cap.isNativePlatform();\n    return cap;\n};\nconst initCapacitorGlobal = (win) => (win.Capacitor = createCapacitor(win));\n\nconst Capacitor = /*#__PURE__*/ initCapacitorGlobal(typeof globalThis !== 'undefined'\n    ? globalThis\n    : typeof self !== 'undefined'\n        ? self\n        : typeof window !== 'undefined'\n            ? window\n            : typeof global !== 'undefined'\n                ? global\n                : {});\nconst registerPlugin = Capacitor.registerPlugin;\n/**\n * @deprecated Provided for backwards compatibility for Capacitor v2 plugins.\n * Capacitor v3 plugins should import the plugin directly. This \"Plugins\"\n * export is deprecated in v3, and will be removed in v4.\n */\nconst Plugins = Capacitor.Plugins;\n/**\n * Provided for backwards compatibility. Use the registerPlugin() API\n * instead, and provide the web plugin as the \"web\" implmenetation.\n * For example\n *\n * export const Example = registerPlugin('Example', {\n *   web: () => import('./web').then(m => new m.Example())\n * })\n *\n * @deprecated Deprecated in v3, will be removed from v4.\n */\nconst registerWebPlugin = (plugin) => legacyRegisterWebPlugin(Capacitor, plugin);\n\n/**\n * Base class web plugins should extend.\n */\nclass WebPlugin {\n    constructor(config) {\n        this.listeners = {};\n        this.windowListeners = {};\n        if (config) {\n            // TODO: add link to upgrade guide\n            console.warn(`Capacitor WebPlugin \"${config.name}\" config object was deprecated in v3 and will be removed in v4.`);\n            this.config = config;\n        }\n    }\n    addListener(eventName, listenerFunc) {\n        const listeners = this.listeners[eventName];\n        if (!listeners) {\n            this.listeners[eventName] = [];\n        }\n        this.listeners[eventName].push(listenerFunc);\n        // If we haven't added a window listener for this event and it requires one,\n        // go ahead and add it\n        const windowListener = this.windowListeners[eventName];\n        if (windowListener && !windowListener.registered) {\n            this.addWindowListener(windowListener);\n        }\n        const remove = async () => this.removeListener(eventName, listenerFunc);\n        const p = Promise.resolve({ remove });\n        Object.defineProperty(p, 'remove', {\n            value: async () => {\n                console.warn(`Using addListener() without 'await' is deprecated.`);\n                await remove();\n            },\n        });\n        return p;\n    }\n    async removeAllListeners() {\n        this.listeners = {};\n        for (const listener in this.windowListeners) {\n            this.removeWindowListener(this.windowListeners[listener]);\n        }\n        this.windowListeners = {};\n    }\n    notifyListeners(eventName, data) {\n        const listeners = this.listeners[eventName];\n        if (listeners) {\n            listeners.forEach(listener => listener(data));\n        }\n    }\n    hasListeners(eventName) {\n        return !!this.listeners[eventName].length;\n    }\n    registerWindowListener(windowEventName, pluginEventName) {\n        this.windowListeners[pluginEventName] = {\n            registered: false,\n            windowEventName,\n            pluginEventName,\n            handler: event => {\n                this.notifyListeners(pluginEventName, event);\n            },\n        };\n    }\n    unimplemented(msg = 'not implemented') {\n        return new Capacitor.Exception(msg, ExceptionCode.Unimplemented);\n    }\n    unavailable(msg = 'not available') {\n        return new Capacitor.Exception(msg, ExceptionCode.Unavailable);\n    }\n    async removeListener(eventName, listenerFunc) {\n        const listeners = this.listeners[eventName];\n        if (!listeners) {\n            return;\n        }\n        const index = listeners.indexOf(listenerFunc);\n        this.listeners[eventName].splice(index, 1);\n        // If there are no more listeners for this type of event,\n        // remove the window listener\n        if (!this.listeners[eventName].length) {\n            this.removeWindowListener(this.windowListeners[eventName]);\n        }\n    }\n    addWindowListener(handle) {\n        window.addEventListener(handle.windowEventName, handle.handler);\n        handle.registered = true;\n    }\n    removeWindowListener(handle) {\n        if (!handle) {\n            return;\n        }\n        window.removeEventListener(handle.windowEventName, handle.handler);\n        handle.registered = false;\n    }\n}\n\nconst WebView = /*#__PURE__*/ registerPlugin('WebView');\n/******** END WEB VIEW PLUGIN ********/\n/******** COOKIES PLUGIN ********/\n/**\n * Safely web encode a string value (inspired by js-cookie)\n * @param str The string value to encode\n */\nconst encode = (str) => encodeURIComponent(str)\n    .replace(/%(2[346B]|5E|60|7C)/g, decodeURIComponent)\n    .replace(/[()]/g, escape);\n/**\n * Safely web decode a string value (inspired by js-cookie)\n * @param str The string value to decode\n */\nconst decode = (str) => str.replace(/(%[\\dA-F]{2})+/gi, decodeURIComponent);\nclass CapacitorCookiesPluginWeb extends WebPlugin {\n    async getCookies() {\n        const cookies = document.cookie;\n        const cookieMap = {};\n        cookies.split(';').forEach(cookie => {\n            if (cookie.length <= 0)\n                return;\n            // Replace first \"=\" with CAP_COOKIE to prevent splitting on additional \"=\"\n            let [key, value] = cookie.replace(/=/, 'CAP_COOKIE').split('CAP_COOKIE');\n            key = decode(key).trim();\n            value = decode(value).trim();\n            cookieMap[key] = value;\n        });\n        return cookieMap;\n    }\n    async setCookie(options) {\n        try {\n            // Safely Encoded Key/Value\n            const encodedKey = encode(options.key);\n            const encodedValue = encode(options.value);\n            // Clean & sanitize options\n            const expires = `; expires=${(options.expires || '').replace('expires=', '')}`; // Default is \"; expires=\"\n            const path = (options.path || '/').replace('path=', ''); // Default is \"path=/\"\n            const domain = options.url != null && options.url.length > 0\n                ? `domain=${options.url}`\n                : '';\n            document.cookie = `${encodedKey}=${encodedValue || ''}${expires}; path=${path}; ${domain};`;\n        }\n        catch (error) {\n            return Promise.reject(error);\n        }\n    }\n    async deleteCookie(options) {\n        try {\n            document.cookie = `${options.key}=; Max-Age=0`;\n        }\n        catch (error) {\n            return Promise.reject(error);\n        }\n    }\n    async clearCookies() {\n        try {\n            const cookies = document.cookie.split(';') || [];\n            for (const cookie of cookies) {\n                document.cookie = cookie\n                    .replace(/^ +/, '')\n                    .replace(/=.*/, `=;expires=${new Date().toUTCString()};path=/`);\n            }\n        }\n        catch (error) {\n            return Promise.reject(error);\n        }\n    }\n    async clearAllCookies() {\n        try {\n            await this.clearCookies();\n        }\n        catch (error) {\n            return Promise.reject(error);\n        }\n    }\n}\nconst CapacitorCookies = registerPlugin('CapacitorCookies', {\n    web: () => new CapacitorCookiesPluginWeb(),\n});\n// UTILITY FUNCTIONS\n/**\n * Read in a Blob value and return it as a base64 string\n * @param blob The blob value to convert to a base64 string\n */\nconst readBlobAsBase64 = async (blob) => new Promise((resolve, reject) => {\n    const reader = new FileReader();\n    reader.onload = () => {\n        const base64String = reader.result;\n        // remove prefix \"data:application/pdf;base64,\"\n        resolve(base64String.indexOf(',') >= 0\n            ? base64String.split(',')[1]\n            : base64String);\n    };\n    reader.onerror = (error) => reject(error);\n    reader.readAsDataURL(blob);\n});\n/**\n * Normalize an HttpHeaders map by lowercasing all of the values\n * @param headers The HttpHeaders object to normalize\n */\nconst normalizeHttpHeaders = (headers = {}) => {\n    const originalKeys = Object.keys(headers);\n    const loweredKeys = Object.keys(headers).map(k => k.toLocaleLowerCase());\n    const normalized = loweredKeys.reduce((acc, key, index) => {\n        acc[key] = headers[originalKeys[index]];\n        return acc;\n    }, {});\n    return normalized;\n};\n/**\n * Builds a string of url parameters that\n * @param params A map of url parameters\n * @param shouldEncode true if you should encodeURIComponent() the values (true by default)\n */\nconst buildUrlParams = (params, shouldEncode = true) => {\n    if (!params)\n        return null;\n    const output = Object.entries(params).reduce((accumulator, entry) => {\n        const [key, value] = entry;\n        let encodedValue;\n        let item;\n        if (Array.isArray(value)) {\n            item = '';\n            value.forEach(str => {\n                encodedValue = shouldEncode ? encodeURIComponent(str) : str;\n                item += `${key}=${encodedValue}&`;\n            });\n            // last character will always be \"&\" so slice it off\n            item.slice(0, -1);\n        }\n        else {\n            encodedValue = shouldEncode ? encodeURIComponent(value) : value;\n            item = `${key}=${encodedValue}`;\n        }\n        return `${accumulator}&${item}`;\n    }, '');\n    // Remove initial \"&\" from the reduce\n    return output.substr(1);\n};\n/**\n * Build the RequestInit object based on the options passed into the initial request\n * @param options The Http plugin options\n * @param extra Any extra RequestInit values\n */\nconst buildRequestInit = (options, extra = {}) => {\n    const output = Object.assign({ method: options.method || 'GET', headers: options.headers }, extra);\n    // Get the content-type\n    const headers = normalizeHttpHeaders(options.headers);\n    const type = headers['content-type'] || '';\n    // If body is already a string, then pass it through as-is.\n    if (typeof options.data === 'string') {\n        output.body = options.data;\n    }\n    // Build request initializers based off of content-type\n    else if (type.includes('application/x-www-form-urlencoded')) {\n        const params = new URLSearchParams();\n        for (const [key, value] of Object.entries(options.data || {})) {\n            params.set(key, value);\n        }\n        output.body = params.toString();\n    }\n    else if (type.includes('multipart/form-data')) {\n        const form = new FormData();\n        if (options.data instanceof FormData) {\n            options.data.forEach((value, key) => {\n                form.append(key, value);\n            });\n        }\n        else {\n            for (const key of Object.keys(options.data)) {\n                form.append(key, options.data[key]);\n            }\n        }\n        output.body = form;\n        const headers = new Headers(output.headers);\n        headers.delete('content-type'); // content-type will be set by `window.fetch` to includy boundary\n        output.headers = headers;\n    }\n    else if (type.includes('application/json') ||\n        typeof options.data === 'object') {\n        output.body = JSON.stringify(options.data);\n    }\n    return output;\n};\n// WEB IMPLEMENTATION\nclass CapacitorHttpPluginWeb extends WebPlugin {\n    /**\n     * Perform an Http request given a set of options\n     * @param options Options to build the HTTP request\n     */\n    async request(options) {\n        const requestInit = buildRequestInit(options, options.webFetchExtra);\n        const urlParams = buildUrlParams(options.params, options.shouldEncodeUrlParams);\n        const url = urlParams ? `${options.url}?${urlParams}` : options.url;\n        const response = await fetch(url, requestInit);\n        const contentType = response.headers.get('content-type') || '';\n        // Default to 'text' responseType so no parsing happens\n        let { responseType = 'text' } = response.ok ? options : {};\n        // If the response content-type is json, force the response to be json\n        if (contentType.includes('application/json')) {\n            responseType = 'json';\n        }\n        let data;\n        let blob;\n        switch (responseType) {\n            case 'arraybuffer':\n            case 'blob':\n                blob = await response.blob();\n                data = await readBlobAsBase64(blob);\n                break;\n            case 'json':\n                data = await response.json();\n                break;\n            case 'document':\n            case 'text':\n            default:\n                data = await response.text();\n        }\n        // Convert fetch headers to Capacitor HttpHeaders\n        const headers = {};\n        response.headers.forEach((value, key) => {\n            headers[key] = value;\n        });\n        return {\n            data,\n            headers,\n            status: response.status,\n            url: response.url,\n        };\n    }\n    /**\n     * Perform an Http GET request given a set of options\n     * @param options Options to build the HTTP request\n     */\n    async get(options) {\n        return this.request(Object.assign(Object.assign({}, options), { method: 'GET' }));\n    }\n    /**\n     * Perform an Http POST request given a set of options\n     * @param options Options to build the HTTP request\n     */\n    async post(options) {\n        return this.request(Object.assign(Object.assign({}, options), { method: 'POST' }));\n    }\n    /**\n     * Perform an Http PUT request given a set of options\n     * @param options Options to build the HTTP request\n     */\n    async put(options) {\n        return this.request(Object.assign(Object.assign({}, options), { method: 'PUT' }));\n    }\n    /**\n     * Perform an Http PATCH request given a set of options\n     * @param options Options to build the HTTP request\n     */\n    async patch(options) {\n        return this.request(Object.assign(Object.assign({}, options), { method: 'PATCH' }));\n    }\n    /**\n     * Perform an Http DELETE request given a set of options\n     * @param options Options to build the HTTP request\n     */\n    async delete(options) {\n        return this.request(Object.assign(Object.assign({}, options), { method: 'DELETE' }));\n    }\n}\nconst CapacitorHttp = registerPlugin('CapacitorHttp', {\n    web: () => new CapacitorHttpPluginWeb(),\n});\n/******** END HTTP PLUGIN ********/\n\nexport { Capacitor, CapacitorCookies, CapacitorException, CapacitorHttp, CapacitorPlatforms, ExceptionCode, Plugins, WebPlugin, WebView, addPlatform, registerPlugin, registerWebPlugin, setPlatform };\n//# sourceMappingURL=index.js.map\n","export var CameraSource;\n(function (CameraSource) {\n    /**\n     * Prompts the user to select either the photo album or take a photo.\n     */\n    CameraSource[\"Prompt\"] = \"PROMPT\";\n    /**\n     * Take a new photo using the camera.\n     */\n    CameraSource[\"Camera\"] = \"CAMERA\";\n    /**\n     * Pick an existing photo from the gallery or photo album.\n     */\n    CameraSource[\"Photos\"] = \"PHOTOS\";\n})(CameraSource || (CameraSource = {}));\nexport var CameraDirection;\n(function (CameraDirection) {\n    CameraDirection[\"Rear\"] = \"REAR\";\n    CameraDirection[\"Front\"] = \"FRONT\";\n})(CameraDirection || (CameraDirection = {}));\nexport var CameraResultType;\n(function (CameraResultType) {\n    CameraResultType[\"Uri\"] = \"uri\";\n    CameraResultType[\"Base64\"] = \"base64\";\n    CameraResultType[\"DataUrl\"] = \"dataUrl\";\n})(CameraResultType || (CameraResultType = {}));\n//# sourceMappingURL=definitions.js.map","import { registerPlugin } from '@capacitor/core';\nconst Camera = registerPlugin('Camera', {\n    web: () => import('./web').then(m => new m.CameraWeb()),\n});\nexport * from './definitions';\nexport { Camera };\n//# sourceMappingURL=index.js.map","import { Camera, CameraDirection, CameraResultType } from '@capacitor/camera';\nimport { Capacitor } from '@capacitor/core';\n\n\ninterface SuperCamera {\n    initCamera(parentElement: HTMLElement, direction: CameraDirection, drawImageCb: Function): Promise<void>,\n    takePicture(): Promise<Blob>,\n    resetCamera(): void,\n}\n\n\nexport class WebCamera implements SuperCamera {\n\n    elVideo: HTMLVideoElement;\n    stream: MediaStream;\n    canvas: HTMLCanvasElement;\n    direction: CameraDirection\n\n    constructor() {\n    }\n\n    public fotoActual: any;\n\n    async initCamera( parentElement: HTMLElement, direction: CameraDirection, drawImageCb: Function = null ) {\n        \n        this.resetCamera();\n\n        if ( !this.elVideo ) {\n            this.elVideo = document.createElement(\"video\")\n            this.elVideo.autoplay = true;\n            this.elVideo.style.display = \"none\"\n            parentElement.appendChild( this.elVideo )\n        }\n        \n        if ( !this.canvas ) {\n            this.canvas = document.createElement(\"canvas\")\n            this.canvas.width = parseInt( parentElement.getAttribute(\"width\") );\n            this.canvas.height = parseInt( parentElement.getAttribute(\"height\") );\n            parentElement.appendChild( this.canvas )\n        }\n\n\n        this.direction = CameraDirection.Front\n        \n        if (navigator.mediaDevices.getUserMedia) {\n            console.info(\"la camara\")\n            const facingMode = (direction == CameraDirection.Front) ? \"user\": \"environment\"\n\n            navigator.mediaDevices.getUserMedia({\n                audio: false,\n                video: {\n                    width: { min: 200 },\n                    height: { min: 200 },\n                    facingMode: facingMode\n                }\n            })\n            .then((stream) => {\n                this.stream = stream;\n                console.info(\"la camara\", this.stream)\n                this.elVideo.srcObject = this.stream;\n\n                this.renderToCanvas( drawImageCb );\n            })\n            .catch(function (err0r) {\n                console.log(\"Something went wrong!\", err0r);\n            });\n        }\n    }\n\n\n    renderToCanvas( drawImageCb: Function = null) {\n\n        let ctx = this.canvas.getContext('2d');\n\n        let imgWidth = this.elVideo.videoWidth;\n        let imgHeight = this.elVideo.videoHeight;\n\n    \tvar imgSize = Math.min(imgWidth, imgHeight);\n        // The following two lines yield a central based cropping.\n        // They can both be amended to be 0, if you wish it to be\n        // a left based cropped image.\n    \tvar left = (imgWidth - imgSize) / 2;\n    \tvar top = (imgHeight - imgSize) / 2;\n\n        if ( typeof drawImageCb == 'function' ) {\n            drawImageCb.call(ctx, this.elVideo, left, top, imgSize, imgSize, 0,0, this.canvas.width, this.canvas.height)\n        } else {\n            ctx.drawImage(this.elVideo, left, top, imgSize, imgSize, 0,0, this.canvas.width, this.canvas.height);\n        }\n\n        requestAnimationFrame(() => this.renderToCanvas() );\n\n    }\n\n    resetCamera() {\n        if (this.stream) this.stream?.getVideoTracks()?.forEach(track => {\n            track?.stop()\n            this.stream?.removeTrack(track)\n        });\n        if (this.elVideo) this.elVideo.srcObject = null;\n    }\n\n    async takePicture(): Promise<File> {\n        return new Promise((resolve, reject) => {\n            try {\n                this.canvas.toBlob( (blob) => {\n                    const filename = \"pic_\" + Math.abs( Math.round( Math.random() * 1000))\n                    var file = new File([blob], filename, {type: \"image/jpeg\"});\n                    resolve(file);\n                }, \"image/jpeg\", 0.8)\n            } catch (error) {\n                reject(error);\n            }\n\n          });\n\n    }\n\n}\n\n\nexport class CapacitorCamera implements SuperCamera {\n\n    async initCamera( ) {\n\n    }\n\n    async takePicture(): Promise<Blob>{\n        const image = await Camera.getPhoto({\n            quality: 90,\n            allowEditing: true,\n            direction: CameraDirection.Front,\n            resultType: CameraResultType.Base64\n          });\n\n        const base64Data = image.base64String;\n        const contentType = 'image/jpeg'; // or image/png, depending on the format of the image\n        const byteCharacters = atob(base64Data);\n        const byteNumbers = new Array(byteCharacters.length);\n        for (let i = 0; i < byteCharacters.length; i++) {\n        byteNumbers[i] = byteCharacters.charCodeAt(i);\n        }\n        const byteArray = new Uint8Array(byteNumbers);\n        const blob = new Blob([byteArray], { type: contentType });\n        return blob;\n    }\n\n    resetCamera(): void{\n\n    }\n\n}\n\nexport class CameraService {\n\n    private camaraManager: SuperCamera\n\n    constructor() {\n        if ( Capacitor.getPlatform() === 'web' ) {\n            this.camaraManager = new WebCamera()\n        } else {\n            this.camaraManager = new CapacitorCamera()\n        }\n    }\n\n\n    async initCamera( parentElement: HTMLElement, cameraDirection: CameraDirection , drawImageCb: Function = null ) {\n       this.camaraManager.initCamera( parentElement, cameraDirection, drawImageCb )\n    }\n\n    async takePicture(): Promise<Blob> {\n        return await this.camaraManager.takePicture()\n    }\n\n    async resetCamera() {\n\n    }\n}\n\n\n\nexport const camera = new CameraService()\n",":host {\n  display: inline-block;\n  width: 100px;\n  filter: drop-shadow(2px 4px 6px black);\n  border: #5a5252 1px solid;\n  border-style: groove;\n}\n\n\nvideo {\n  display: none;\n}\n\ncanvas {\n  width: 100%;\n  height: 100%;\n}","import { CameraDirection } from '@capacitor/camera';\nimport { Component, Host, h, Method, Listen, Prop, Event, EventEmitter, Element } from '@stencil/core';\nimport { camera } from '../../utils/camera';\n\n\n@Component({\n  tag: 'input-file-from-webcam',\n  styleUrl: 'input-file-from-webcam.css',\n  shadow: true,\n})\nexport class InputFileFromWebcam {\n\n\n  @Element() el: HTMLElement;\n\n\n  @Prop({reflect: true, mutable: true}) width?: number = 460\n  @Prop({reflect: true, mutable: true}) height?: number = 460\n\n  /**\n   * FacingModel optiones following https://developer.mozilla.org/en-US/docs/Web/API/MediaTrackConstraints/facingMode#value\n   */\n  @Prop({ mutable: true, reflect: true }) facingMode?: CameraDirection = CameraDirection.Front\n\n  /**\n   * you can pass a function and override the canvas.drawImage function so you\n   * can change the image adding filters or any kind of magin in your image\n   * \n   * you just need to crear a function with all canvas.-drawImage arguments\n   * \n   * here you have the list of vars you get: videoElement, left, top, imgSize, imgSize, 0,0, canvas.width, canvas.height\n   */\n  @Prop() drawImageCb?: Function = null\n\n  @Method()\n  async takePic(): Promise<Blob> {\n    // show a prompt\n    const pic = await camera.takePicture()\n    this.pictureTaken.emit(pic);\n    return pic\n  }\n\n  @Method()\n  async toggleCamera(): Promise<void>{\n    this.__toogleFacingMode()\n  }\n\n\n  @Event({\n    eventName: 'pictureTaken',\n    composed: true,\n    cancelable: false,\n    bubbles: true,\n  }) pictureTaken: EventEmitter<Blob>;\n\n  @Event({\n    eventName: 'facingModeChanged',\n    composed: true,\n    cancelable: false,\n    bubbles: true,\n  }) facingModeChanged: EventEmitter<CameraDirection>;\n\n\n\n  @Listen('click')\n  onClickHandler() {\n    this.__toogleFacingMode()\n  }\n\n \n\n  /**\n   * Toogle webcam, for example in mobile show front or back camera\n   * you can block this behaviour by setting the facingMode Property\n   */\n  private __toogleFacingMode() {\n    // only change if no facinMode property was set\n    this.facingMode = (this.facingMode != CameraDirection.Front) ? CameraDirection.Front : CameraDirection.Rear\n    this.facingModeChanged.emit( this.facingMode   )\n  }\n\n \n\n  componentWillMount() {\n   \n  }\n  \n  async componentDidRender() {\n    camera.initCamera( this.el, CameraDirection.Front, this.drawImageCb );\n  }\n\n  async disconnectedCallback() {\n    camera.resetCamera()\n  }\n\n  render() {\n    return (\n      <Host style={{height: this.height+\"px\", width: this.width+\"px\"}}>\n\n        <slot name='before'></slot>\n        \n        <slot></slot>\n\n        <slot name='after'></slot>\n      </Host>\n    );\n  }\n\n}\n"],"mappings":"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"}