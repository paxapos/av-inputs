{"version":3,"file":"facepi.service.js","sourceRoot":"","sources":["../../src/utils/facepi.service.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,YAAY,EAAE,MAAM,eAAe,CAAC;AAC7C,OAAO,KAAK,OAAO,MAAM,aAAa,CAAC;AAEvC;;;EAGE;AACF,MAAM,OAAO,cAAc;EAGvB;IAFA,gBAAW,GAAG,KAAK,CAAC;IAIhB,cAAc;IACd,MAAM,SAAS,GAAG,YAAY,CAAC,gBAAgB,CAAC,CAAC;IACjD,OAAO,CAAC,IAAI,CAAC,gBAAgB,CAAC,WAAW,CAAC,SAAS,CAAC,CAAC,IAAI,CAAC,GAAG,EAAE;MAC3D,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;IAC5B,CAAC,CAAC,CAAC;EACP,CAAC;EAED,KAAK,CAAC,UAAU,CAAC,EAAqC;IAClD,IAAK,IAAI,CAAC,WAAW,EAAG;MACpB,0BAA0B;MAC1B,MAAM,SAAS,GAAG,GAAG,CAAA;MACrB,MAAM,cAAc,GAAG,GAAG,CAAA;MAE1B,MAAM,GAAG,GAAG,IAAI,OAAO,CAAC,uBAAuB,CAAC,EAAE,SAAS,EAAE,cAAc,EAAE,CAAC,CAAA;MAE9E,OAAO,MAAM,OAAO,CAAC,gBAAgB,CAAC,EAAE,EAAE,GAAG,CAAC,CAAA;KACjD;EACL,CAAC;CACJ","sourcesContent":["import { getAssetPath } from '@stencil/core';\nimport * as faceapi from 'face-api.js';\n\n/**\n * create a class \"FaceapiService\" with a constructor\n * \n*/\nexport class FaceapiService {\n    modelLoaded = false;\n\n    constructor() {\n\n        // init models\n        const MODEL_URL = getAssetPath('/assets/models');\n        faceapi.nets.tinyFaceDetector.loadFromUri(MODEL_URL).then(() => {\n            this.modelLoaded = true;\n        });\n    }\n\n    async detectFace(el:HTMLVideoElement|HTMLCanvasElement):  Promise<faceapi.FaceDetection> {\n        if ( this.modelLoaded ) {\n            // TinyFaceDetectorOptions\n            const inputSize = 192\n            const scoreThreshold = 0.7\n            \n            const ops = new faceapi.TinyFaceDetectorOptions({ inputSize, scoreThreshold })\n\n            return await faceapi.detectSingleFace(el, ops)\n        }\n    }\n}\n\n\n"]}