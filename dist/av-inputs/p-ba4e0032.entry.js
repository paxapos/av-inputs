import{r as e,c as t,h as a,H as i,g as r}from"./p-CeZZpupa.js";import{p as s}from"./p-Ci_MokX0.js";const n=":host{display:flex;flex-direction:column;align-items:center;--main-color:SlateBlue;--scanned-text-color:crimson;--stopped-color:grey;text-align:center}.stopped label{color:var(--stopped-color)}.stopped .loader::after,.stopped .loader::before{border-color:var(--stopped-color)}.scanning label{animation:blinker 2s linear 1s infinite}.scanning .loader::after,.scanning .loader::before{animation:animloader 2s linear infinite}input{display:none}.scanned-text{font-size:1.5rem;color:var(--scanned-text-color);margin:0;text-wrap:nowrap;height:1.5rem}label{display:block;width:100%;height:100%;cursor:pointer;color:var(--main-color);font-weight:bold}label:hover{background-color:#f1f1f1}label:active{background-color:#e1e1e1}.loader{width:48px;height:48px;display:inline-block;position:relative}.loader::after,.loader::before{content:'';box-sizing:border-box;width:48px;height:48px;border-radius:50%;border:2px solid;border-color:var(--main-color);position:absolute;left:0;top:0}.loader::after{animation-delay:1s}@keyframes animloader{0%{transform:scale(0);opacity:1}100%{transform:scale(1);opacity:0}}@keyframes blinker{50%{opacity:0.5}}";const o=class{constructor(a){e(this,a);this.scan=t(this,"scan",7);this.reading=false;this.readingEnabled=false;this.modalTimer=0;this.scanTitle="Scanning Text";this.scannedText=""}displayModal(e){const t=this.el.parentNode;const a=document.createElement("div");a.style.position="fixed";a.style.top="0";a.style.left="0";a.style.width="100vw";a.style.height="100vh";a.style.backgroundColor="rgba(254,254,254,0.65)";a.style.zIndex="1000";a.style.display="flex";a.style.alignItems="center";a.style.justifyContent="center";a.style.color="black";a.style.fontSize="3rem";a.style.fontWeight="bold";a.style.textAlign="center";a.style.padding="1rem";a.style.boxSizing="border-box";a.style.borderRadius="1rem";a.style.overflow="hidden";a.style.textOverflow="ellipsis";a.style.whiteSpace="nowrap";a.style.cursor="pointer";a.textContent=e.text;a.addEventListener("click",(()=>{a.remove()}));t.appendChild(a);setTimeout((()=>{a.remove()}),this.modalTimer)}handleScan(e){if(this.modalTimer>0){this.displayModal(e.detail)}this.scannedText=""}componentDidLoad(){if(!this.readingEnabled){this.start()}}onEnterHandler(){if(this.scannedText==""){return false}const e=s(this.scannedText);this.scan.emit(e)}watchScannedTextHandler(e){if(e.length>0){this.restartOnTimeout()}else{clearTimeout(this.timeout)}}async getText(){return this.scannedText}async getData(){if(this.scannedText==""){return null}return s(this.scannedText)}reset(){this.scannedText="";this.readingEnabled=false}restartOnTimeout(e=5e3){clearTimeout(this.timeout);this.timeout=setTimeout((()=>{this.reset()}),e)}onKeydownHandler(e){if(this.readingEnabled===false){return}if(e.isComposing){return}if(e.code=="Enter"||e.code=="NumpadEnter"||e.code=="Tab"){return this.onEnterHandler()}if(e.key=="Shift"||e.key=="Control"||e.key=="Alt"||e.key=="AltGraph"||e.key=="Meta"){return}if(e.key=="Backspace"){this.scannedText=this.scannedText.slice(0,-1);return}if(e.key=="Escape"){this.scannedText="";return}if(e.key==" "){this.scannedText+=" ";return}if(e.key=="CapsLock"){return}if(e.key.length===1&&!e.ctrlKey&&!e.metaKey&&!e.altKey){this.scannedText+=e.key}}handleKeyDown(e){if(this.readingEnabled){this.onKeydownHandler(e)}}async start(){this.readingEnabled=true}async stop(){this.readingEnabled=false}handleOnInpujtChangeEvent(e){this.scannedText=e.target.value}spanLoader(){return a("span",{class:"loader"})}render(){let e=this.readingEnabled?"":"stopped";if(this.readingEnabled){if(this.scannedText.length===0){e+=" scanning"}else{e+=" reading"}}return a(i,{key:"dc6eaa6bd56ab40e65f83fd530aa8d7eaafba86f"},a("div",{key:"566932dbaff5a62dd86f105adfc24de5923e6792",class:e},a("div",{key:"d324de05faeea3789c0052bbf0cf22fd5719c8b1"},this.spanLoader()),this.scanTitle&&a("label",{key:"a26446f146e54dd297e893de39deef1ad5cbc1e6"},this.scanTitle),a("div",{key:"236536404992cc01224de4cc216a3a5a8dd616cb",class:"scanned-text"},this.scannedText),a("input",{key:"c798b9be1a8510264eda28208a745ea7adb94607",type:"text",value:this.scannedText,onChange:e=>this.handleOnInpujtChangeEvent(e)})))}get el(){return r(this)}static get watchers(){return{scannedText:["watchScannedTextHandler"]}}};o.style=n;export{o as input_scan_reader};
//# sourceMappingURL=p-ba4e0032.entry.js.map