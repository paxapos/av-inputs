import{r as t,a as e,h as r,H as i,g as a}from"./p-42af810e.js";const n=":host{display:block}";const s=class{constructor(r){t(this,r);this.scan=e(this,"scan",7);this.regexToData=[{regex:/^([a-z0-9]+)$/gi,type:"ALFANUMERICO"},{regex:/^([0-9]+)$/gi,type:"NUMBER"},{regex:/^(https?:\/\/)?([\da-z\.-]+)\.([a-z\.]{2,6})([\/\w \.-]*)*\/?$/gi,type:"URL"},{regex:/^([a-z0-9_\.-]+)@([\da-z\.-]+)\.([a-z\.]{2,6})$/gi,type:"EMAIL"}];this.modalTimer=500;this.scannedText=""}handleScan(t){if(this.modalTimer==0){return}const e=this.el.parentNode;const r=document.createElement("div");r.style.position="fixed";r.style.top="0";r.style.left="0";r.style.width="100vw";r.style.height="100vh";r.style.backgroundColor="rgba(254,254,254,0.65)";r.style.zIndex="1000";r.style.display="flex";r.style.alignItems="center";r.style.justifyContent="center";r.style.color="black";r.style.fontSize="3rem";r.style.fontWeight="bold";r.style.textAlign="center";r.style.padding="1rem";r.style.boxSizing="border-box";r.style.borderRadius="1rem";r.style.overflow="hidden";r.style.textOverflow="ellipsis";r.style.whiteSpace="nowrap";r.style.cursor="pointer";r.textContent=t.detail.text;r.addEventListener("click",(()=>{r.remove()}));e.appendChild(r);setTimeout((()=>{r.remove()}),this.modalTimer)}processText(t){const e=this.runRegex(t);let r;if(e){r=e}else{r={type:"DESCONOCIDO",text:this.scannedText,data:{text:this.scannedText}}}return r}onEnterHandler(){if(this.scannedText==""){return false}const t=this.processText(this.scannedText);this.scannedText="";this.scan.emit(t)}handleKeyDown(t){if(t.isComposing){return}if(t.code=="Enter"||t.code=="NumpadEnter"||t.code=="Tab"){return this.onEnterHandler()}if(t.key=="Shift"||t.key=="Control"||t.key=="Alt"||t.key=="Meta"){return}if(t.key=="Backspace"){this.scannedText=this.scannedText.slice(0,-1);return}this.scannedText+=t.key}async getText(){return this.scannedText}async getData(){if(this.scannedText==""){return null}return this.processText(this.scannedText)}runRegex(t){let e,r;e=/^\"?(\w{8}) +\"?([a-z])\"?(\w)\"?([a-z ]+)\"?([a-z ]+)\"?([a-z]+)\"?([0-9-]+)\"?([a-z])"/gi;r=e.exec(t);if(r){return this.getDataFromDNIv1(r,t)}e=/^\"?(\d+)\"?([a-z ]+)\"?([a-z ]+)\"?([a-z])\"?(\w{8})\"?([a-z])\"?([0-9-]+)/gi;r=e.exec(t);if(r){return this.getDataFromDNIv2(r,t)}e=/^\"?(\w{8})\"?([a-z])\"?([a-z ]+)\"?([a-z ]+)\"?([a-z]+)\"?([0-9-]+)\"?([a-z])\"?([0-9-]+)/gi;r=e.exec(t);if(r){return this.getDataFromLicenciaDeCOnducir(t)}for(let e=0;e<this.regexToData.length;e++){const r=this.regexToData[e];const i=r.regex.exec(t);if(i){return this.getDataFromRegex(r.type,t)}}}getDataFromDNIv1(t,e){return{type:"DNIv1",text:e,data:{apellido:t[4],nombre:t[5],dni:t[1],fecha_nacimiento:t[6],sexo:t[7]}}}getDataFromDNIv2(t,e){return{type:"DNIv2",text:e,data:{apellido:t[2],nombre:t[3],dni:t[5],fecha_nacimiento:t[7],sexo:t[4]}}}getDataFromRegex(t,e){return{type:t,text:e}}getDataFromLicenciaDeCOnducir(t){return this.getDataFromRegex("LICENCIA_CONDUCIR",t)}handleOnInpujtChangeEvent(t){this.scannedText=t.target.value}render(){return r(i,null,r("input",{type:"text",value:this.scannedText,onChange:t=>this.handleOnInpujtChangeEvent(t)}))}get el(){return a(this)}};s.style=n;export{s as input_scan_reader};
//# sourceMappingURL=p-9ebf1114.entry.js.map